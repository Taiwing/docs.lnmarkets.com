
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>LN Markets API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sa, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-c9d8fa83.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-e9bde216.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;javascript--node&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-1a6155f6.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">curl</a>
              <a href="#" data-language-name="javascript--node">Node.js</a>
              <a href="#" data-language-name="python">Python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#limits" class="toc-h1 toc-link" data-title="Limits">Limits</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#positions" class="toc-h2 toc-link" data-title="Positions">Positions</a>
                  </li>
                  <li>
                    <a href="#rate" class="toc-h2 toc-link" data-title="Rate">Rate</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#websocket" class="toc-h1 toc-link" data-title="Websocket">Websocket</a>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
          <li>
            <a href="#api" class="toc-h1 toc-link" data-title="API v1.0.0">API v1.0.0</a>
          </li>
          <li>
            <a href="#api-login" class="toc-h1 toc-link" data-title="Login">Login</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#login-via-credentials" class="toc-h2 toc-link" data-title="Login via credentials">Login via credentials</a>
                  </li>
                  <li>
                    <a href="#register-new-credentials" class="toc-h2 toc-link" data-title="Register new credentials">Register new credentials</a>
                  </li>
                  <li>
                    <a href="#login-with-a-jwt" class="toc-h2 toc-link" data-title="Login with a JWT">Login with a JWT</a>
                  </li>
                  <li>
                    <a href="#request-credential-reset-link-via-mail" class="toc-h2 toc-link" data-title="Request credential reset link via mail">Request credential reset link via mail</a>
                  </li>
                  <li>
                    <a href="#reset-password" class="toc-h2 toc-link" data-title="Reset password">Reset password</a>
                  </li>
                  <li>
                    <a href="#login-via-joule" class="toc-h2 toc-link" data-title="Login via Joule">Login via Joule</a>
                  </li>
                  <li>
                    <a href="#request-message" class="toc-h2 toc-link" data-title="Request message">Request message</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api-futures" class="toc-h1 toc-link" data-title="Futures">Futures</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create" class="toc-h2 toc-link" data-title="Create">Create</a>
                  </li>
                  <li>
                    <a href="#update" class="toc-h2 toc-link" data-title="Update">Update</a>
                  </li>
                  <li>
                    <a href="#close" class="toc-h2 toc-link" data-title="Close">Close</a>
                  </li>
                  <li>
                    <a href="#history" class="toc-h2 toc-link" data-title="History">History</a>
                  </li>
                  <li>
                    <a href="#futures-data-history" class="toc-h2 toc-link" data-title="Futures data history">Futures data history</a>
                  </li>
                  <li>
                    <a href="#cancel" class="toc-h2 toc-link" data-title="Cancel">Cancel</a>
                  </li>
                  <li>
                    <a href="#cash-in" class="toc-h2 toc-link" data-title="Cash-in">Cash-in</a>
                  </li>
                  <li>
                    <a href="#add-margin" class="toc-h2 toc-link" data-title="Add margin">Add margin</a>
                  </li>
                  <li>
                    <a href="#close-all" class="toc-h2 toc-link" data-title="Close-all">Close-all</a>
                  </li>
                  <li>
                    <a href="#cancel-all" class="toc-h2 toc-link" data-title="Cancel-all">Cancel-all</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api-user" class="toc-h1 toc-link" data-title="User">User</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#informations" class="toc-h2 toc-link" data-title="Informations">Informations</a>
                  </li>
                  <li>
                    <a href="#update-user" class="toc-h2 toc-link" data-title="Update user">Update user</a>
                  </li>
                  <li>
                    <a href="#update-password" class="toc-h2 toc-link" data-title="Update password">Update password</a>
                  </li>
                  <li>
                    <a href="#list-api-tokens" class="toc-h2 toc-link" data-title="List API Tokens">List API Tokens</a>
                  </li>
                  <li>
                    <a href="#revoke-api-token" class="toc-h2 toc-link" data-title="Revoke API Token">Revoke API Token</a>
                  </li>
                  <li>
                    <a href="#generate-api-token" class="toc-h2 toc-link" data-title="Generate API Token">Generate API Token</a>
                  </li>
                  <li>
                    <a href="#deposit" class="toc-h2 toc-link" data-title="Deposit">Deposit</a>
                  </li>
                  <li>
                    <a href="#withdraw-via-invoice" class="toc-h2 toc-link" data-title="Withdraw via invoice">Withdraw via invoice</a>
                  </li>
                  <li>
                    <a href="#withdraw" class="toc-h2 toc-link" data-title="Withdraw">Withdraw</a>
                  </li>
                  <li>
                    <a href="#logout" class="toc-h2 toc-link" data-title="Logout">Logout</a>
                  </li>
                  <li>
                    <a href="#confirm-recovery-email-with-confirmationtoken" class="toc-h2 toc-link" data-title="Confirm recovery email with confirmationToken">Confirm recovery email with confirmationToken</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api-state" class="toc-h1 toc-link" data-title="State">State</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#api-informations" class="toc-h2 toc-link" data-title="API informations">API informations</a>
                  </li>
                  <li>
                    <a href="#node-informations" class="toc-h2 toc-link" data-title="Node informations">Node informations</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api-lnurl" class="toc-h1 toc-link" data-title="LNURL">LNURL</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#auth-2" class="toc-h2 toc-link" data-title="Auth 2">Auth 2</a>
                  </li>
                  <li>
                    <a href="#auth" class="toc-h2 toc-link" data-title="Auth">Auth</a>
                  </li>
                  <li>
                    <a href="#withdraw-3" class="toc-h2 toc-link" data-title="Withdraw 3">Withdraw 3</a>
                  </li>
                  <li>
                    <a href="#create-a-lnurl-withdraw" class="toc-h2 toc-link" data-title="Create a LNURL Withdraw">Create a LNURL Withdraw</a>
                  </li>
                  <li>
                    <a href="#withdraw-2" class="toc-h2 toc-link" data-title="Withdraw 2">Withdraw 2</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api-leaderboard" class="toc-h1 toc-link" data-title="Leaderboard">Leaderboard</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-current-leaderboard" class="toc-h2 toc-link" data-title="Get current Leaderboard">Get current Leaderboard</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api-announcements" class="toc-h1 toc-link" data-title="Announcements">Announcements</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-the-ln-markets-announcements" class="toc-h2 toc-link" data-title="Get the LN Markets announcements">Get the LN Markets announcements</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://lnmarkets.com/'>LN Markets - Mainnet</a></li>
            <li><a href='https://testnet.lnmarkets.com/'>LN Markets - Testnet</a></li>
            <li><a href='https://twitter.com/LNMarkets'>Twitter</a></li>
            <li><a href='https://www.t.me/lnmarkets'>Telegram</a></li>
            <li><a href='https://lnmarkets.substack.com/'>Newsletter</a></li>
            <li><a href='https://github.com/lnmarkets'>Github</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>LN Markets opens a simple REST API to integrate with your program or trading bot.</p>

<p>This API reference provides information on available endpoints and how to interact with it.</p>

<p>The API endpoint for mainnet is: <code>https://api.lnmarkets.com/v1</code></p>

<p>If you need you can use the legacy api see <a href="https://docs.lnmarkets.com/api/legacy">here</a></p>

<aside class="notice">
If you want to try our API with <bold>testnet</bold> bitcoin use <code>https://api.testnet.lnmarkets.com</code>
</aside>
<h1 id='authentication'>Authentication</h1>
<p>One type of authentication is required, currently we are using a JSON Web Token (<a href="https://jwt.io/">JWT</a>)</p>

<p>In order to generate your JWT, go to your Profile on <a href="https://lnmarkets.com/">LN Markets</a> (click on the menu in the upper right corner) and select API Tokens. </p>

<p>You can now generate your token for various scopes: user, positions, deposit, withdraw. </p>

<p>Your JWT can be valid for a given period of time or indefinitely.</p>

<p>The JWT must be provided within the header AUTHORIZATION like :</p>

<p><code>Authorization: Bearer &lt;token&gt;</code></p>

<p><strong>Note :</strong> Never share your JWT !</p>

<p>You can revoke any JWT on your profile page.</p>
<h1 id='limits'>Limits</h1><h2 id='positions'>Positions</h2>
<p>There is a maximum of 50 open positions per account.</p>
<h2 id='rate'>Rate</h2>
<p>Requests to our REST API are rate limited to 1 request per second.</p>

<p>Endpoints which do not require authentication are limited to 30 requests per minute.</p>

<p>If you throw too much error such as 4XX or 5XX, your IP could be banned for a certain period of time.</p>
<h3 id='headers'>Headers</h3>
<table><thead>
<tr>
<th>Header</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Retry-After</td>
<td>14</td>
</tr>
<tr>
<td>X-Ratelimit-Remaining</td>
<td>0</td>
</tr>
<tr>
<td>X-Ratelimit-Reset</td>
<td>1601997680244</td>
</tr>
</tbody></table>

<p><br/></p>

<p>Retry-After : Will tell you how many seconds you need to wait to call this endpoint if your limit is down to 0.</p>

<p>X-Ratelimit-Remaining : This is how many request do you have left.</p>

<p>X-Ratelimit-Reset: This is the timestamp in ms when you will be granted new points.</p>
<h1 id='websocket'>Websocket</h1>
<p>You can find a websocket endpoint where you can gather realtime data from LN Markets such as bid, offer, index, and last price.</p>

<p>The websocket endpoint for mainnet is: <code>wss://api.lnmarkets.com/realtime</code></p>

<p>You are limited to 60 connections per hour.</p>

<p>Authentication to websocket will come soon!</p>
<h1 id='errors'>Errors</h1>
<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- Your api key has the wrong scope.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- Not Found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a ressource with an invalid method.</td>
</tr>
<tr>
<td>418</td>
<td>I&#39;m a teapot.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- Your connection is being rate limited</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- Something went wrong !</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>
<!-- Generator: Widdershins v4.0.1 -->

<h1 id="api">API v1.0.0</h1>

<blockquote>
<p>Scroll down for code samples, example requests and responses. Select a language for code samples from the tabs above or the mobile navigation menu.</p>
</blockquote>

<p>Trade derivatives on the <strong><a href="https://lightning.network/">Lightning Network</a></strong>.
You can find our website <strong><a href="https://lnmarkets.com/">here</a></strong>.</p>

<p>Base URLs:</p>

<ul>
<li><p><a href="https://api.lnmarkets.com/v1">https://api.lnmarkets.com/v1</a></p></li>
<li><p><a href="https://api.testnet.lnmarkets.com/v1">https://api.testnet.lnmarkets.com/v1</a></p></li>
</ul>

<h1 id="api-login">Login</h1>

<p>Here you can find the different way to auth yourself on LN Markets, mostly use for browser.</p>
<h2 id='login-via-credentials'>Login via credentials</h2>
<p><a id="opIdV1_Login_loginCredentials"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/login/credentials"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"login"</span><span class="p">:</span> <span class="s">"lnmarkets"</span><span class="p">,</span>
    <span class="s">"password"</span><span class="p">:</span> <span class="s">"mYUNh4x0r48L3P422w0rd"</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/login/credentials</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span><span class="na">login</span><span class="p">:</span> <span class="dl">'</span><span class="s1">lnmarkets</span><span class="dl">'</span><span class="p">,</span> <span class="na">password</span><span class="p">:</span> <span class="dl">'</span><span class="s1">mYUNh4x0r48L3P422w0rd</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/login/credentials <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"login":"lnmarkets","password":"mYUNh4x0r48L3P422w0rd"}'</span>
</code></pre></div>
<p><code>POST /login/credentials</code></p>

<p>Use existing credentials to log into an account.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lnmarkets"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mYUNh4x0r48L3P422w0rd"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="login-via-credentials-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» login</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» password</td>
<td>body</td>
<td>string(password)</td>
<td>true</td>
<td>none</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lnmarkets"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"account_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credentials"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="login-via-credentials-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Successfuly logged into the account.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="login-via-credentials-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» username</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>User choosen username (May differe from login)</td>
</tr>
<tr>
<td>» balance</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>User current balance</td>
</tr>
<tr>
<td>» account_type</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>User account type, here credentials</td>
</tr>
</tbody></table>
<h3 id='response-headers'>Response Headers</h3>
<table><thead>
<tr>
<th>Status</th>
<th>Header</th>
<th>Type</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>Set-Cookie</td>
<td>string</td>
<td></td>
<td>none</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='register-new-credentials'>Register new credentials</h2>
<p><a id="opIdV1_Login_registerCredentials"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/login/credentials/create"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"login"</span><span class="p">:</span> <span class="s">"lnmarkets"</span><span class="p">,</span>
    <span class="s">"password"</span><span class="p">:</span> <span class="s">"mYUNh4x0r48L3P422w0rd"</span><span class="p">,</span>
    <span class="s">"email"</span><span class="p">:</span> <span class="s">"me@mytotallylegitmail.com"</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/login/credentials/create</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">login</span><span class="p">:</span> <span class="dl">'</span><span class="s1">lnmarkets</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">password</span><span class="p">:</span> <span class="dl">'</span><span class="s1">mYUNh4x0r48L3P422w0rd</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">me@mytotallylegitmail.com</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/login/credentials/create <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"login":"lnmarkets","password":"mYUNh4x0r48L3P422w0rd","email":"me@mytotallylegitmail.com"}'</span>
</code></pre></div>
<p><code>POST /login/credentials/create</code></p>

<p>Create new user</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lnmarkets"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mYUNh4x0r48L3P422w0rd"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"me@mytotallylegitmail.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="register-new-credentials-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» login</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» password</td>
<td>body</td>
<td>string(password)</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» email</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lnmarkets"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"account_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credentials"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="register-new-credentials-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>User successfuly created and logged.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="register-new-credentials-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» username</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>User chosen username (May differ from login)</td>
</tr>
<tr>
<td>» balance</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>User current balance</td>
</tr>
<tr>
<td>» account_type</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>User account type, here credentials</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='login-with-a-jwt'>Login with a JWT</h2>
<p><a id="opIdV1_Login_loginCredentials"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/login/token"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"object"</span><span class="p">,</span>
    <span class="s">"additionalProperties"</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
    <span class="s">"required"</span><span class="p">:</span> <span class="p">[</span><span class="s">"token"</span><span class="p">],</span>
    <span class="s">"properties"</span><span class="p">:</span> <span class="p">{</span><span class="s">"token"</span><span class="p">:</span> <span class="p">{</span><span class="s">"type"</span><span class="p">:</span> <span class="s">"string"</span><span class="p">}}</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/login/token</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">additionalProperties</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">required</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">token</span><span class="dl">'</span><span class="p">],</span>
    <span class="na">properties</span><span class="p">:</span> <span class="p">{</span><span class="na">token</span><span class="p">:</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">}}</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/login/token <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"type":"object","additionalProperties":false,"required":["token"],"properties":{"token":{"type":"string"}}}'</span>
</code></pre></div>
<p><code>POST /login/token</code></p>

<p>Use a JWT to log on LN Markets.
The token need to have the &#39;user&#39; scope and the token will be revoked ater the sucessfull login</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"additionalProperties"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"token"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="login-with-a-jwt-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» token</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lnmarkets"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"account_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credentials"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="login-with-a-jwt-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Successfuly logged into the account.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="login-with-a-jwt-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» username</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>User choosen username (May differe from login)</td>
</tr>
<tr>
<td>» balance</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>User current balance</td>
</tr>
<tr>
<td>» account_type</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>User account type, here credentials</td>
</tr>
</tbody></table>
<h3 id='response-headers-2'>Response Headers</h3>
<table><thead>
<tr>
<th>Status</th>
<th>Header</th>
<th>Type</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>Set-Cookie</td>
<td>string</td>
<td></td>
<td>none</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='request-credential-reset-link-via-mail'>Request credential reset link via mail</h2>
<p><a id="opIdV1_Login_loginCredentialsReset"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/login/credentials/reset"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s">"email"</span><span class="p">:</span> <span class="s">"me@mymailprovider.com"</span><span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/login/credentials/reset</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span><span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">me@mymailprovider.com</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/login/credentials/reset <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"email":"me@mymailprovider.com"}'</span>
</code></pre></div>
<p><code>POST /login/credentials/reset</code></p>

<p>Use current recovery mail address to reset password</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"me@mymailprovider.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="request-credential-reset-link-via-mail-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» email</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
</tbody></table>

<h3 id="request-credential-reset-link-via-mail-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Credential reset link request granted</td>
<td>None</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='reset-password'>Reset password</h2>
<p><a id="opIdV1_User_resetUserPassword"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/login/credentials/reset"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"resetToken"</span><span class="p">:</span> <span class="s">"b45dd2e30309aa708a73f0cfa0e38db5bbbbd16055087a692e0711365e7e08f5"</span><span class="p">,</span>
    <span class="s">"uid"</span><span class="p">:</span> <span class="s">"d068f829-26e6-4743-b10d-ebb5a83b3624"</span><span class="p">,</span>
    <span class="s">"newPassword"</span><span class="p">:</span> <span class="s">"PleaseDontStealMySats"</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"PUT"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PUT</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/login/credentials/reset</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">resetToken</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b45dd2e30309aa708a73f0cfa0e38db5bbbbd16055087a692e0711365e7e08f5</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">uid</span><span class="p">:</span> <span class="dl">'</span><span class="s1">d068f829-26e6-4743-b10d-ebb5a83b3624</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">newPassword</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PleaseDontStealMySats</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> PUT <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/login/credentials/reset <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"resetToken":"b45dd2e30309aa708a73f0cfa0e38db5bbbbd16055087a692e0711365e7e08f5","uid":"d068f829-26e6-4743-b10d-ebb5a83b3624","newPassword":"PleaseDontStealMySats"}'</span>
</code></pre></div>
<p><code>PUT /login/credentials/reset</code></p>

<p>Reset password with your resetToken.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"resetToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b45dd2e30309aa708a73f0cfa0e38db5bbbbd16055087a692e0711365e7e08f5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d068f829-26e6-4743-b10d-ebb5a83b3624"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"newPassword"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PleaseDontStealMySats"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="reset-password-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Payload containing resetToken, uid and the new password.</td>
</tr>
<tr>
<td>» resetToken</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» uid</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» newPassword</td>
<td>body</td>
<td>string(password)</td>
<td>true</td>
<td>New password wanted by the user</td>
</tr>
</tbody></table>
<h4 id='detailed-descriptions'>Detailed descriptions</h4>
<p><strong>body</strong>: Payload containing resetToken, uid and the new password.</p>

<h3 id="reset-password-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Password successfuly reset.</td>
<td>None</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='login-via-joule'>Login via Joule</h2>
<p><a id="opIdV1_Login_loginJoule"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/login/joule"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"signature"</span><span class="p">:</span> <span class="s">"rd1nn7qbnibf58mzaknokqu6eciiqr64gahrzzxy3h8ybdygbun7s86zrms1dedqnh7t4gxz3esqmaqi9pkf85f48rexai7qztbdznfp"</span><span class="p">,</span>
    <span class="s">"alias"</span><span class="p">:</span> <span class="s">"LN-BIG 1337"</span><span class="p">,</span>
    <span class="s">"message"</span><span class="p">:</span> <span class="s">"Sign this super secret message"</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/login/joule</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">signature</span><span class="p">:</span> <span class="dl">'</span><span class="s1">rd1nn7qbnibf58mzaknokqu6eciiqr64gahrzzxy3h8ybdygbun7s86zrms1dedqnh7t4gxz3esqmaqi9pkf85f48rexai7qztbdznfp</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">alias</span><span class="p">:</span> <span class="dl">'</span><span class="s1">LN-BIG 1337</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Sign this super secret message</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/login/joule <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"signature":"rd1nn7qbnibf58mzaknokqu6eciiqr64gahrzzxy3h8ybdygbun7s86zrms1dedqnh7t4gxz3esqmaqi9pkf85f48rexai7qztbdznfp","alias":"LN-BIG 1337","message":"Sign this super secret message"}'</span>
</code></pre></div>
<p><code>POST /login/joule</code></p>

<p>Use the browser extension <a href="https://lightningjoule.com/">Joule</a> to authenticate user.
The message has to be obtained using GET /login/joule</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rd1nn7qbnibf58mzaknokqu6eciiqr64gahrzzxy3h8ybdygbun7s86zrms1dedqnh7t4gxz3esqmaqi9pkf85f48rexai7qztbdznfp"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LN-BIG 1337"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sign this super secret message"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="login-via-joule-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» message</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Message signed by the wallet private key, who is obtained using GET /login/joule</td>
</tr>
<tr>
<td>» signature</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Signature created by the wallet</td>
</tr>
<tr>
<td>» alias</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>Node alias if avalaible</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"account_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"joule"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"linkingpublickey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02b21cc4667e2d5e14920013d187d2af8c3ccfd32a310f63c7767cf8564f126357"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="p">,</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LN-BIG 1337"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="login-via-joule-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Sucessfuly logged user.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="login-via-joule-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» username</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>Username default to node alias</td>
</tr>
<tr>
<td>» balance</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>User balance</td>
</tr>
<tr>
<td>» linkingpublickey</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>Pubkey of the node</td>
</tr>
<tr>
<td>» account_type</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>Account type</td>
</tr>
</tbody></table>
<h3 id='response-headers-3'>Response Headers</h3>
<table><thead>
<tr>
<th>Status</th>
<th>Header</th>
<th>Type</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>Set-Cookie</td>
<td>string</td>
<td></td>
<td>none</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='request-message'>Request message</h2>
<p><a id="opIdV1_Login_getJouleMessage"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/login/joule"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/login/joule</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/login/joule <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span>
</code></pre></div>
<p><code>GET /login/joule</code></p>

<p>Generates a message that user can sign with POST /login/joule</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"I am signing this message to login on LN Markets : 09d9bc06786d37eae6b60b537475d83d6b97177af22a74160a1fc3b0721f051e"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="request-message-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Message generated</td>
<td>Inline</td>
</tr>
</tbody></table>

<h3 id="request-message-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» message</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>The message contain a fixed part : &quot;I am signing this message to login on LN Markets&quot;<br>and a variable one who is a 64 char hex string, the variable one is used to identify which session should be authentificated</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>

<h1 id="api-futures">Futures</h1>

<p>Interactions with the futures market and retrive your positions</p>
<h2 id='create'>Create</h2>
<p><a id="opIdV1_Futures_createPosition"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"l"</span><span class="p">,</span>
    <span class="s">"side"</span><span class="p">:</span> <span class="s">"b"</span><span class="p">,</span>
    <span class="s">"price"</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
    <span class="s">"stoploss"</span><span class="p">:</span> <span class="mi">9000</span><span class="p">,</span>
    <span class="s">"takeprofit"</span><span class="p">:</span> <span class="mi">11000</span><span class="p">,</span>
    <span class="s">"quantity"</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s">"leverage"</span><span class="p">:</span> <span class="mi">50</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/futures</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">l</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">side</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">price</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
    <span class="na">stoploss</span><span class="p">:</span> <span class="mi">9000</span><span class="p">,</span>
    <span class="na">takeprofit</span><span class="p">:</span> <span class="mi">11000</span><span class="p">,</span>
    <span class="na">quantity</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="na">leverage</span><span class="p">:</span> <span class="mi">50</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/futures <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"type":"l","side":"b","price":10000,"stoploss":9000,"takeprofit":11000,"quantity":100,"leverage":50}'</span>
</code></pre></div>
<p><code>POST /futures</code></p>

<p>Send the order form parameters to add a new position in database.
<strong>If <code>type=&quot;l&quot;</code>, the property <code>price</code> must be included in the request to know when the position should be filled.</strong>
<strong>You can choose to use the margin or the quantity as a parameter, the other will be calculated with the one you choosed</strong></p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"l"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"stoploss"</span><span class="p">:</span><span class="w"> </span><span class="mi">9000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"takeprofit"</span><span class="p">:</span><span class="w"> </span><span class="mi">11000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
  </span><span class="nl">"leverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="create-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Payload with all the information needed to setup a new position.</td>
</tr>
<tr>
<td>» type</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Type of the order (Market or Limit)</td>
</tr>
<tr>
<td>» side</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Side of the order (Buy or Sell)</td>
</tr>
<tr>
<td>» margin</td>
<td>body</td>
<td>integer(int32)</td>
<td>false</td>
<td>Margin or quantity should be filled</td>
</tr>
<tr>
<td>» leverage</td>
<td>body</td>
<td>number(double)</td>
<td>true</td>
<td>Leverage of the order</td>
</tr>
<tr>
<td>» quantity</td>
<td>body</td>
<td>number</td>
<td>false</td>
<td>Quantity or margin should be filled</td>
</tr>
<tr>
<td>» takeprofit</td>
<td>body</td>
<td>number(double)</td>
<td>false</td>
<td>Takeprofit level</td>
</tr>
<tr>
<td>» stoploss</td>
<td>body</td>
<td>number(double)</td>
<td>false</td>
<td>Stoploss level</td>
</tr>
<tr>
<td>» price</td>
<td>body</td>
<td>number(double)</td>
<td>false</td>
<td>Required when using a limit order</td>
</tr>
</tbody></table>
<h4 id='detailed-descriptions-2'>Detailed descriptions</h4>
<p><strong>body</strong>: Payload with all the information needed to setup a new position.</p>
<h4 id='enumerated-values'>Enumerated Values</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>» type</td>
<td>l</td>
</tr>
<tr>
<td>» type</td>
<td>m</td>
</tr>
<tr>
<td>» side</td>
<td>b</td>
</tr>
<tr>
<td>» side</td>
<td>s</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"249dc818-f8a5-4713-a3a3-8fe85f2e8969"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">666</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"takeprofit_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"takeprofit"</span><span class="p">:</span><span class="w"> </span><span class="mi">13337</span><span class="p">,</span><span class="w">
  </span><span class="nl">"stoploss_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"stoploss"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="p">,</span><span class="w">
  </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"s"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">8888</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">-13640</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_filled_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">424242</span><span class="p">,</span><span class="w">
  </span><span class="nl">"liquidation"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"leverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="nl">"creation_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="create-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Position sucessfully created.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="create-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>UUID of the position</td>
</tr>
<tr>
<td>» id</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position ID to be deprecated</td>
</tr>
<tr>
<td>» type</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position type [l,m]</td>
</tr>
<tr>
<td>» side</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Side of the position [s,b]</td>
</tr>
<tr>
<td>» price</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Entry price of the position</td>
</tr>
<tr>
<td>» quantity</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Quantity of the position</td>
</tr>
<tr>
<td>» margin</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Margin used for the position creation</td>
</tr>
<tr>
<td>» leverage</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Leverage of the position</td>
</tr>
<tr>
<td>» liquidation</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Liquidation level when the position will be closed</td>
</tr>
<tr>
<td>» market_filled_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>When the order was filled</td>
</tr>
<tr>
<td>» market_wi</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Market working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» pl</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>PL of the position</td>
</tr>
<tr>
<td>» margin_wi</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Margin working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» stoploss</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>stoploss level</td>
</tr>
<tr>
<td>» stoploss_wi</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Stoploss working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» takeprofit</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Takeprofit level</td>
</tr>
<tr>
<td>» takeprofit_wi</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Takeprofit working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» creation_ts</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>When the position was created</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: futures ), cookieAuth
</aside>
<h2 id='update'>Update</h2>
<p><a id="opIdV1_Futures_updatePosition"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"pid"</span><span class="p">:</span> <span class="s">"b87eef8a-52ab-2fea-1adc-c41fba870b0f"</span><span class="p">,</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"takeprofit"</span><span class="p">,</span>
    <span class="s">"value"</span><span class="p">:</span> <span class="mf">13290.5</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"PUT"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PUT</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/futures</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">pid</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b87eef8a-52ab-2fea-1adc-c41fba870b0f</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">takeprofit</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">value</span><span class="p">:</span> <span class="mf">13290.5</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> PUT <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/futures <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"pid":"b87eef8a-52ab-2fea-1adc-c41fba870b0f","type":"takeprofit","value":13290.5}'</span>
</code></pre></div>
<p><code>PUT /futures</code></p>

<p>Allows user to modify <code>stoploss</code> or <code>takeprofit</code> parameters of an existing position.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b87eef8a-52ab-2fea-1adc-c41fba870b0f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"takeprofit"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">13290.5</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="update-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» pid</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» type</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» value</td>
<td>body</td>
<td>number</td>
<td>true</td>
<td>none</td>
</tr>
</tbody></table>
<h4 id='enumerated-values-2'>Enumerated Values</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>» type</td>
<td>takeprofit</td>
</tr>
<tr>
<td>» type</td>
<td>stoploss</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b87eef8a-52ab-2fea-1adc-c41fba870b0f"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="update-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Says whether or not the position was updated.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="update-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position id</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: futures ), cookieAuth
</aside>
<h2 id='close'>Close</h2>
<p><a id="opIdV1_Futures_closePosition"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures"</span>

<span class="n">querystring</span> <span class="o">=</span> <span class="p">{</span><span class="s">"pid"</span><span class="p">:</span><span class="s">"a2ca6172-1078-463d-ae3f-8733f36a9b0e"</span><span class="p">}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"DELETE"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">querystring</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DELETE</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/futures</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="p">{</span><span class="na">pid</span><span class="p">:</span> <span class="dl">'</span><span class="s1">a2ca6172-1078-463d-ae3f-8733f36a9b0e</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> DELETE <span class="se">\</span>
  <span class="nt">--url</span> <span class="s1">'https://api.lnmarkets.com/v1/futures?pid=a2ca6172-1078-463d-ae3f-8733f36a9b0e'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span>
</code></pre></div>
<p><code>DELETE /futures</code></p>

<p>Close the user position, the PL will be calculated against the current bid or offer
depending on the side of the position</p>

<h3 id="close-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pid</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>ID of the position to close.</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a2ca6172-1078-463d-ae3f-8733f36a9b0e"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"exit_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"closed_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-10-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"closed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="close-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Position is closed</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="close-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» closed</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Is position closed</td>
</tr>
<tr>
<td>» closed_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>Position closed ts</td>
</tr>
<tr>
<td>» exit_price</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>At which price the position was closed</td>
</tr>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position id</td>
</tr>
<tr>
<td>» pl</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>PL of the position</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: trading ), cookieAuth
</aside>
<h2 id='history'>History</h2>
<p><a id="opIdV1_Futures_getPositionList"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/futures</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/futures <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span>
</code></pre></div>
<p><code>GET /futures</code></p>

<p>Retrieves either opened, closed or all positions.</p>

<p><strong>If no parameters are sent, all positions are fetched.</strong></p>

<h3 id="history-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>query</td>
<td>string</td>
<td>false</td>
<td>List opened positions.</td>
</tr>
</tbody></table>
<h4 id='enumerated-values-3'>Enumerated Values</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>all</td>
</tr>
<tr>
<td>type</td>
<td>open</td>
</tr>
<tr>
<td>type</td>
<td>running</td>
</tr>
<tr>
<td>type</td>
<td>closed</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"positions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"249dc818-f8a5-4713-a3a3-8fe85f2e8969"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">666</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"takeprofit_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canceled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"takeprofit"</span><span class="p">:</span><span class="w"> </span><span class="mi">13337</span><span class="p">,</span><span class="w">
      </span><span class="nl">"stoploss_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canceled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"stoploss"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sign"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"s"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">8888</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">-13640</span><span class="p">,</span><span class="w">
      </span><span class="nl">"market_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"market_filled_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"margin_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"closed"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">424242</span><span class="p">,</span><span class="w">
      </span><span class="nl">"liquidation"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"leverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
      </span><span class="nl">"exit_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"closed_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-10-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"closed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"canceled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="history-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Positions history sucessfully fetched.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="history-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>UUID of the position</td>
</tr>
<tr>
<td>» id</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position ID to be deprecated</td>
</tr>
<tr>
<td>» type</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position type [l,m]</td>
</tr>
<tr>
<td>» side</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Side of the position [s,b]</td>
</tr>
<tr>
<td>» pl</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>PL of the position</td>
</tr>
<tr>
<td>» price</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Entry price of the position</td>
</tr>
<tr>
<td>» quantity</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Quantity of the position</td>
</tr>
<tr>
<td>» leverage</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Leverage of the position</td>
</tr>
<tr>
<td>» liquidation</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Liquidation level when the position will be closed</td>
</tr>
<tr>
<td>» margin</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Margin used for the position creation</td>
</tr>
<tr>
<td>» margin_wi</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Margin working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» market_filled_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>When the order was filled</td>
</tr>
<tr>
<td>» market_wi</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Market working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» canceled</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Is the position canceled</td>
</tr>
<tr>
<td>» closed</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Is the position closed</td>
</tr>
<tr>
<td>» closed_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>When the position was closed</td>
</tr>
<tr>
<td>» creation_ts</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>When the position was created</td>
</tr>
<tr>
<td>» exit_price</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>At which price the position was closed</td>
</tr>
<tr>
<td>» stoploss</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>stoploss level</td>
</tr>
<tr>
<td>» stoploss_wi</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Stoploss working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» takeprofit</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Takeprofit level</td>
</tr>
<tr>
<td>» takeprofit_wi</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Takeprofit working indicator [filled, running, closed, canceled]</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: futures ), cookieAuth
</aside>
<h2 id='futures-data-history'>Futures data history</h2>
<p><a id="opIdV1_Futures_History"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures/history"</span>

<span class="n">querystring</span> <span class="o">=</span> <span class="p">{</span><span class="s">"table"</span><span class="p">:</span><span class="s">"index"</span><span class="p">}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">querystring</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/futures/history</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="p">{</span><span class="na">table</span><span class="p">:</span> <span class="dl">'</span><span class="s1">index</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> <span class="s1">'https://api.lnmarkets.com/v1/futures/history?table=index'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span>
</code></pre></div>
<p><code>GET /futures/history</code></p>

<p>Retrieves at most 1000 entries between two given timestamps.</p>

<h3 id="futures-data-history-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>table</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>bid_offer or index</td>
</tr>
<tr>
<td>from</td>
<td>query</td>
<td>integer(int64)</td>
<td>false</td>
<td>Starting timestamp (in ms).</td>
</tr>
<tr>
<td>to</td>
<td>query</td>
<td>integer(int64)</td>
<td>false</td>
<td>Ending timestamp (in ms).</td>
</tr>
<tr>
<td>limit</td>
<td>query</td>
<td>integer(int64)</td>
<td>false</td>
<td>Number of rows</td>
</tr>
</tbody></table>
<h4 id='enumerated-values-4'>Enumerated Values</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>table</td>
<td>bid_offer</td>
</tr>
<tr>
<td>table</td>
<td>index</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1605633250615990</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bid"</span><span class="p">:</span><span class="w"> </span><span class="mi">15853</span><span class="p">,</span><span class="w">
      </span><span class="nl">"offer"</span><span class="p">:</span><span class="w"> </span><span class="mi">15885</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="futures-data-history-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Futures market data</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="futures-data-history-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» time</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Timestamp at which the data was recorded (in µs)</td>
</tr>
<tr>
<td>» bid</td>
<td>number</td>
<td>false</td>
<td>none</td>
<td>Bid value at that time</td>
</tr>
<tr>
<td>» offer</td>
<td>number</td>
<td>false</td>
<td>none</td>
<td>Offer value at that time</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='cancel'>Cancel</h2>
<p><a id="opIdV1_Futures_cancelPosition"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures/cancel"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s">"pid"</span><span class="p">:</span> <span class="s">"b87eef8a-52ab-2fea-1adc-c41fba870b0f"</span><span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/futures/cancel</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span><span class="na">pid</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b87eef8a-52ab-2fea-1adc-c41fba870b0f</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/futures/cancel <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"pid":"b87eef8a-52ab-2fea-1adc-c41fba870b0f"}'</span>
</code></pre></div>
<p><code>POST /futures/cancel</code></p>

<p>Cancel the position linked to the given <code>pid</code>.<strong>Only works on positions that are not currently filled</strong>.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b87eef8a-52ab-2fea-1adc-c41fba870b0f"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="cancel-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Payload containing the position id that will be cancelled.</td>
</tr>
<tr>
<td>» pid</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Position ID</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b87eef8a-52ab-2fea-1adc-c41fba870b0f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"canceled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"closed_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-11-15T10:50:40.332Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="cancel-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Position is canceled</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="cancel-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» canceled</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Canncel success</td>
</tr>
<tr>
<td>» closed_ts</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>When the position was canceled</td>
</tr>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position ID</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: futures ), cookieAuth
</aside>
<h2 id='cash-in'>Cash-in</h2>
<p><a id="opIdV1_Futures_cashin"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures/cash-in"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"amount"</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="s">"pid"</span><span class="p">:</span> <span class="s">"99c470e1-2e03-4486-a37f-1255e08178b1"</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/futures/cash-in</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span><span class="na">amount</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="na">pid</span><span class="p">:</span> <span class="dl">'</span><span class="s1">99c470e1-2e03-4486-a37f-1255e08178b1</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/futures/cash-in <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"amount":1000,"pid":"99c470e1-2e03-4486-a37f-1255e08178b1"}'</span>
</code></pre></div>
<p><code>POST /futures/cash-in</code></p>

<p>Retrieves part of one running position&#39;s PL.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"99c470e1-2e03-4486-a37f-1255e08178b1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="cash-in-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Payload with data relative to the process.</td>
</tr>
<tr>
<td>» amount</td>
<td>body</td>
<td>integer(int64)</td>
<td>true</td>
<td>Amount of PL to cash-in (in sats)</td>
</tr>
<tr>
<td>» pid</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Position ID from which to retrieve PL</td>
</tr>
</tbody></table>
<h4 id='detailed-descriptions-3'>Detailed descriptions</h4>
<p><strong>body</strong>: Payload with data relative to the process.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"249dc818-f8a5-4713-a3a3-8fe85f2e8969"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">666</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"takeprofit_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"takeprofit"</span><span class="p">:</span><span class="w"> </span><span class="mi">13337</span><span class="p">,</span><span class="w">
  </span><span class="nl">"stoploss_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"stoploss"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="p">,</span><span class="w">
  </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"s"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">8888</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">-13640</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_filled_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">424242</span><span class="p">,</span><span class="w">
  </span><span class="nl">"liquidation"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"leverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="nl">"creation_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="cash-in-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Cash-in successfully retrieved and new position informations are sent back.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="cash-in-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>UUID of the position</td>
</tr>
<tr>
<td>» id</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position ID to be deprecated</td>
</tr>
<tr>
<td>» type</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position type [l,m]</td>
</tr>
<tr>
<td>» side</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Side of the position [s,b]</td>
</tr>
<tr>
<td>» price</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Entry price of the position</td>
</tr>
<tr>
<td>» quantity</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Quantity of the position</td>
</tr>
<tr>
<td>» margin</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Margin used for the position creation</td>
</tr>
<tr>
<td>» leverage</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Leverage of the position</td>
</tr>
<tr>
<td>» liquidation</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Liquidation level when the position will be closed</td>
</tr>
<tr>
<td>» market_filled_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>When the order was filled</td>
</tr>
<tr>
<td>» market_wi</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Market working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» pl</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>PL of the position</td>
</tr>
<tr>
<td>» margin_wi</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Margin working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» stoploss</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>stoploss level</td>
</tr>
<tr>
<td>» stoploss_wi</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Stoploss working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» takeprofit</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Takeprofit level</td>
</tr>
<tr>
<td>» takeprofit_wi</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Takeprofit working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» creation_ts</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>When the position was created</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: futures ), cookieAuth
</aside>
<h2 id='add-margin'>Add margin</h2>
<p><a id="opIdV1_Futures_addmargin"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures/add-margin"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"amount"</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="s">"pid"</span><span class="p">:</span> <span class="s">"99c470e1-2e03-4486-a37f-1255e08178b1"</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/futures/add-margin</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span><span class="na">amount</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="na">pid</span><span class="p">:</span> <span class="dl">'</span><span class="s1">99c470e1-2e03-4486-a37f-1255e08178b1</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/futures/add-margin <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"amount":1000,"pid":"99c470e1-2e03-4486-a37f-1255e08178b1"}'</span>
</code></pre></div>
<p><code>POST /futures/add-margin</code></p>

<p>Add margin to a running position.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"99c470e1-2e03-4486-a37f-1255e08178b1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="add-margin-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Payload with data relative to the process.</td>
</tr>
<tr>
<td>» amount</td>
<td>body</td>
<td>integer(int64)</td>
<td>true</td>
<td>Amount of margin to add (in sats)</td>
</tr>
<tr>
<td>» pid</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Position ID from which to retrieve PL</td>
</tr>
</tbody></table>
<h4 id='detailed-descriptions-4'>Detailed descriptions</h4>
<p><strong>body</strong>: Payload with data relative to the process.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"249dc818-f8a5-4713-a3a3-8fe85f2e8969"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">666</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"takeprofit_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"takeprofit"</span><span class="p">:</span><span class="w"> </span><span class="mi">13337</span><span class="p">,</span><span class="w">
  </span><span class="nl">"stoploss_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"stoploss"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="p">,</span><span class="w">
  </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"s"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">8888</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">-13640</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_filled_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">424242</span><span class="p">,</span><span class="w">
  </span><span class="nl">"liquidation"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"leverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="nl">"creation_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="add-margin-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Margin successfully added and new position informations are sent back.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="add-margin-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>UUID of the position</td>
</tr>
<tr>
<td>» id</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position ID to be deprecated</td>
</tr>
<tr>
<td>» type</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position type [l,m]</td>
</tr>
<tr>
<td>» side</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Side of the position [s,b]</td>
</tr>
<tr>
<td>» price</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Entry price of the position</td>
</tr>
<tr>
<td>» quantity</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Quantity of the position</td>
</tr>
<tr>
<td>» margin</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Margin used for the position creation</td>
</tr>
<tr>
<td>» leverage</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Leverage of the position</td>
</tr>
<tr>
<td>» liquidation</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Liquidation level when the position will be closed</td>
</tr>
<tr>
<td>» market_filled_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>When the order was filled</td>
</tr>
<tr>
<td>» market_wi</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Market working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» pl</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>PL of the position</td>
</tr>
<tr>
<td>» margin_wi</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Margin working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» stoploss</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>stoploss level</td>
</tr>
<tr>
<td>» stoploss_wi</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Stoploss working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» takeprofit</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Takeprofit level</td>
</tr>
<tr>
<td>» takeprofit_wi</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Takeprofit working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» creation_ts</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>When the position was created</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: futures ), cookieAuth
</aside>
<h2 id='close-all'>Close-all</h2>
<p><a id="opIdV1_Futures_closeAllPosition"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures/all/close"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"DELETE"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DELETE</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/futures/all/close</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> DELETE <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/futures/all/close <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span>
</code></pre></div>
<p><code>DELETE /futures/all/close</code></p>

<p>Close every user position. The PL will be calculated against the current bid or offer
depending on the side of the position.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a2ca6172-1078-463d-ae3f-8733f36a9b0e"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"exit_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"closed_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-10-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"closed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="close-all-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Every position has been successfully closed</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="close-all-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» closed</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Is position closed</td>
</tr>
<tr>
<td>» closed_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>Position closed ts</td>
</tr>
<tr>
<td>» exit_price</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>At which price the position was closed</td>
</tr>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position id</td>
</tr>
<tr>
<td>» pl</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>PL of the position</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: futures ), cookieAuth
</aside>
<h2 id='cancel-all'>Cancel-all</h2>
<p><a id="opIdV1_Futures_cancelAllPosition"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures/all/cancel"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"DELETE"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DELETE</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/futures/all/cancel</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> DELETE <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/futures/all/cancel <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span>
</code></pre></div>
<p><code>DELETE /futures/all/cancel</code></p>

<p>Cancel all open positions</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a2ca6172-1078-463d-ae3f-8733f36a9b0e"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"canceled_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-10-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"canceled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="cancel-all-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Array with canceled positions</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="cancel-all-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» canceled</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Is position canceled</td>
</tr>
<tr>
<td>» closed_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>Position canceled ts</td>
</tr>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position id</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: futures ), cookieAuth
</aside>

<h1 id="api-user">User</h1>

<p>You can retrieve your user data and modify it</p>
<h2 id='informations'>Informations</h2>
<p><a id="opIdV1_User_getUser"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/user"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/user</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/user <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span>
</code></pre></div>
<p><code>GET /user</code></p>

<p>Get the user account Information</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d068f829-26e6-4743-b10d-ebb5a83b3624"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">361086</span><span class="p">,</span><span class="w">
  </span><span class="nl">"account_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joule"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Testnet-node"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"linkingpublickey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"035555cbdd2b5642bbd196b31df477fad20125ae99119fd5ffb1d42c7f4811dd3a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"show_username"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"show_leaderboard"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="informations-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>User information</td>
<td>Inline</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="informations-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» uid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>User&#39;s UUID</td>
</tr>
<tr>
<td>» balance</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>User current balance (avalaible)</td>
</tr>
<tr>
<td>» username</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Username</td>
</tr>
<tr>
<td>» account_type</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>One of [&#39;lnurl&#39;, &#39;credentials&#39;, &#39;joule&#39;]</td>
</tr>
<tr>
<td>» linkingpublickey</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Public key used for lnurl or joule account</td>
</tr>
<tr>
<td>» show_leaderboard</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Show the user PL in the leaderboard</td>
</tr>
<tr>
<td>» show_username</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Show the username on LN Marktes public data, if false show &#39;Anonymous&#39;</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: user ), cookieAuth
</aside>
<h2 id='update-user'>Update user</h2>
<p><a id="opIdV1_User_updateUser"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/user"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"show_username"</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
    <span class="s">"show_leaderboard"</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="s">"username"</span><span class="p">:</span> <span class="s">"Cryptoking"</span><span class="p">,</span>
    <span class="s">"email"</span><span class="p">:</span> <span class="s">"mememeeee@JeSuisLeBest.com"</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"PUT"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PUT</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/user</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">show_username</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">show_leaderboard</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">username</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Cryptoking</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">mememeeee@JeSuisLeBest.com</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> PUT <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/user <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"show_username":false,"show_leaderboard":true,"username":"Cryptoking","email":"mememeeee@JeSuisLeBest.com"}'</span>
</code></pre></div>
<p><code>PUT /user</code></p>

<p>Modifies account parameters</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"show_username"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"show_leaderboard"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cryptoking"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mememeeee@JeSuisLeBest.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="update-user-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» show_leaderboard</td>
<td>body</td>
<td>boolean</td>
<td>false</td>
<td>Show the user PL in the leaderboard</td>
</tr>
<tr>
<td>» show_username</td>
<td>body</td>
<td>boolean</td>
<td>false</td>
<td>Show the username on LN Marktes public data, if false show &#39;Anonymous&#39;</td>
</tr>
<tr>
<td>» username</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>Username displayed on LN Markets public data</td>
</tr>
<tr>
<td>» email</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>Email used to recover account</td>
</tr>
<tr>
<td>» resend_email</td>
<td>body</td>
<td>boolean</td>
<td>false</td>
<td>Ask to resend the confirmation email</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d068f829-26e6-4743-b10d-ebb5a83b3624"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">361086</span><span class="p">,</span><span class="w">
  </span><span class="nl">"account_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joule"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Testnet-node"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"linkingpublickey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"035555cbdd2b5642bbd196b31df477fad20125ae99119fd5ffb1d42c7f4811dd3a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"show_username"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"show_leaderboard"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="update-user-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>User information</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="update-user-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» uid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>User&#39;s UUID</td>
</tr>
<tr>
<td>» balance</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>User current balance (avalaible)</td>
</tr>
<tr>
<td>» username</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Username</td>
</tr>
<tr>
<td>» account_type</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>One of [&#39;lnurl&#39;, &#39;credentials&#39;, &#39;joule&#39;]</td>
</tr>
<tr>
<td>» linkingpublickey</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Public key used for lnurl or joule account</td>
</tr>
<tr>
<td>» show_leaderboard</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Show the user PL in the leaderboard</td>
</tr>
<tr>
<td>» show_username</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Show the username on LN Marktes public data, if false show &#39;Anonymous&#39;</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: user ), cookieAuth
</aside>
<h2 id='update-password'>Update password</h2>
<p><a id="opIdV1_User_updateUser"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/user/update-password"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"previousPassword"</span><span class="p">:</span> <span class="s">"previousUnguessablePassword"</span><span class="p">,</span>
    <span class="s">"newPassword"</span><span class="p">:</span> <span class="s">"PleaseDontStealMySats"</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"PUT"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PUT</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/user/update-password</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">previousPassword</span><span class="p">:</span> <span class="dl">'</span><span class="s1">previousUnguessablePassword</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">newPassword</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PleaseDontStealMySats</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> PUT <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/user/update-password <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"previousPassword":"previousUnguessablePassword","newPassword":"PleaseDontStealMySats"}'</span>
</code></pre></div>
<p><code>PUT /user/update-password</code></p>

<p>Update the current password to the requested one.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"previousPassword"</span><span class="p">:</span><span class="w"> </span><span class="s2">"previousUnguessablePassword"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"newPassword"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PleaseDontStealMySats"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="update-password-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Payload containing user credentials.</td>
</tr>
<tr>
<td>» previousPassword</td>
<td>body</td>
<td>string(password)</td>
<td>true</td>
<td>Old password</td>
</tr>
<tr>
<td>» newPassword</td>
<td>body</td>
<td>string(password)</td>
<td>true</td>
<td>New password wanted by the user</td>
</tr>
</tbody></table>
<h4 id='detailed-descriptions-5'>Detailed descriptions</h4>
<p><strong>body</strong>: Payload containing user credentials.</p>

<h3 id="update-password-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Password successfuly updated.</td>
<td>None</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: user ), cookieAuth
</aside>
<h2 id='list-api-tokens'>List API Tokens</h2>
<p><a id="opIdV1_User_GetJWTList"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/user/jwt"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/user/jwt</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/user/jwt <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span>
</code></pre></div>
<p><code>GET /user/jwt</code></p>

<p>Retrieves the list of active JSON Web Token user currently holds.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"aud"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"withdraw"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"deposit"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"exp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"iat"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"jti"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ckea35me20019r8u36374585f"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"revoked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<h3 id="list-api-tokens-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Token list retrieved.</td>
<td>Inline</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="list-api-tokens-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» aud</td>
<td>[string]</td>
<td>false</td>
<td>none</td>
<td>Scopes of the token</td>
</tr>
<tr>
<td>» exp</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>Expiration of the token</td>
</tr>
<tr>
<td>» iat</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>When the token was issued</td>
</tr>
<tr>
<td>» jti</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Unique id of the token</td>
</tr>
<tr>
<td>» revoked</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Is it revoked or not</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
cookieAuth
</aside>
<h2 id='revoke-api-token'>Revoke API Token</h2>
<p><a id="opIdV1_User_RevokeJWT"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/user/jwt"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"DELETE"</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span><span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DELETE</span><span class="dl">'</span><span class="p">,</span> <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/user/jwt</span><span class="dl">'</span><span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> DELETE <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/user/jwt
</code></pre></div>
<p><code>DELETE /user/jwt</code></p>

<p>Using the <code>jti</code> parameter, identifies and revoke usage of a given JWT.</p>

<h3 id="revoke-api-token-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>jti</td>
<td>query</td>
<td>string</td>
<td>false</td>
<td>Token unique identifier.</td>
</tr>
</tbody></table>

<h3 id="revoke-api-token-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Token successfuly revoked.</td>
<td>None</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
cookieAuth
</aside>
<h2 id='generate-api-token'>Generate API Token</h2>
<p><a id="opIdV1_User_CreateJWT"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/user/jwt"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"expiry"</span><span class="p">:</span> <span class="mi">86400</span><span class="p">,</span>
    <span class="s">"scopes"</span><span class="p">:</span> <span class="p">[</span><span class="s">"deposit"</span><span class="p">,</span> <span class="s">"withdraw"</span><span class="p">]</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/user/jwt</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span><span class="na">expiry</span><span class="p">:</span> <span class="mi">86400</span><span class="p">,</span> <span class="na">scopes</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">deposit</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">withdraw</span><span class="dl">'</span><span class="p">]},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/user/jwt <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"expiry":86400,"scopes":["deposit","withdraw"]}'</span>
</code></pre></div>
<p><code>POST /user/jwt</code></p>

<p>Using the given scopes, allow the token bearer to get access to different parts of the public API.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"expiry"</span><span class="p">:</span><span class="w"> </span><span class="mi">86400</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scopes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"deposit"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"withdraw"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="generate-api-token-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Scopes of authorization that the token will grant to the bearer.</td>
</tr>
<tr>
<td>» scopes</td>
<td>body</td>
<td>[string]</td>
<td>true</td>
<td>Scopes of the token</td>
</tr>
<tr>
<td>» expiry</td>
<td>body</td>
<td>integer(int32)</td>
<td>true</td>
<td>Expiration of the token</td>
</tr>
</tbody></table>
<h4 id='detailed-descriptions-6'>Detailed descriptions</h4>
<p><strong>body</strong>: Scopes of authorization that the token will grant to the bearer.</p>
<h4 id='enumerated-values-5'>Enumerated Values</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>» scopes</td>
<td>deposit</td>
</tr>
<tr>
<td>» scopes</td>
<td>withdraw</td>
</tr>
<tr>
<td>» scopes</td>
<td>futures</td>
</tr>
<tr>
<td>» scopes</td>
<td>user</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIiLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjMwMDAiLCJpYXQiOjE1OTgwNTg2NDQsInNjb3BlcyI6WyJ3aXRoZHJhdyIsImRlcG9zaXQiXX0.xJ3f5eMeRiN0eSzo3IDviny9B9v_-bLg4t_EWmXFBxc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="generate-api-token-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Token successfuly created, its Base64URL encoded signature is returned for future use.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="generate-api-token-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» token</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>JWT</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
cookieAuth
</aside>
<h2 id='deposit'>Deposit</h2>
<p><a id="opIdV1_User_getDepositHistory"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/user/deposit"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/user/deposit</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/user/deposit <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span>
</code></pre></div>
<p><code>GET /user/deposit</code></p>

<p>Get deposit history</p>

<h3 id="deposit-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>nbItem</td>
<td>query</td>
<td>integer</td>
<td>false</td>
<td>Maximum length of the returned table.</td>
</tr>
<tr>
<td>index</td>
<td>query</td>
<td>integer</td>
<td>false</td>
<td>Which page we want (offset = nbItem * (index - 1)).</td>
</tr>
<tr>
<td>getLength</td>
<td>query</td>
<td>boolean</td>
<td>false</td>
<td>Return the length of the date slice given.</td>
</tr>
<tr>
<td>start</td>
<td>query</td>
<td>integer</td>
<td>false</td>
<td>Start of the time interval (UNIX UTC timestamp)</td>
</tr>
<tr>
<td>end</td>
<td>query</td>
<td>integer</td>
<td>false</td>
<td>End of the time interval (UNIX UTC timestamp)</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"transaction"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"269157f3-d4a1-4493-afcb-5e8fdaa49288"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">99400</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"payment_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33f45c13c7ddcae46c6732414552893ca599f9399c62ffc2cfae209e8b17c5c3"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sucess_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="deposit-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>History sucessfully pulled.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="deposit-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» transaction</td>
<td>[object]</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» id</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Deposit ID in case of deposit</td>
</tr>
<tr>
<td>»» amount</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>Amount in sat</td>
</tr>
<tr>
<td>»» creation_ts</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>When the transaction was initiated</td>
</tr>
<tr>
<td>»» payment_hash</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» success</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» sucess_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: user ), cookieAuth
</aside>
<h2 id='withdraw-via-invoice'>Withdraw via invoice</h2>
<p><a id="opIdV1_User_Withdraw"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/user/withdraw"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"amount"</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="s">"unit"</span><span class="p">:</span> <span class="s">"sat"</span><span class="p">,</span>
    <span class="s">"invoice"</span><span class="p">:</span> <span class="s">"lntb100u1p0jr0ykpp5ldx3un8ym6z0uwjxd083mp2rcr04d2dv0fkx729ajs62pq9pfjqqdql23jhxapdwa5hg6rywfshwttjda6hgegcqzpgxq92fjuqsp5m6q0fzynu2qr624mzjc285duurhccmkfg94mcdctc0p9s7qkrq8q9qy9qsqp862cjznpey5r76e7amhlpmhwn2c7xvke59srhv0xf75m4ksjm4hzn8y9xy0zs5ec6gxmsr8gj4q23w8ped32llscjcneyjz2afeapqpu4gamz"</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/user/withdraw</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">amount</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="na">unit</span><span class="p">:</span> <span class="dl">'</span><span class="s1">sat</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">invoice</span><span class="p">:</span> <span class="dl">'</span><span class="s1">lntb100u1p0jr0ykpp5ldx3un8ym6z0uwjxd083mp2rcr04d2dv0fkx729ajs62pq9pfjqqdql23jhxapdwa5hg6rywfshwttjda6hgegcqzpgxq92fjuqsp5m6q0fzynu2qr624mzjc285duurhccmkfg94mcdctc0p9s7qkrq8q9qy9qsqp862cjznpey5r76e7amhlpmhwn2c7xvke59srhv0xf75m4ksjm4hzn8y9xy0zs5ec6gxmsr8gj4q23w8ped32llscjcneyjz2afeapqpu4gamz</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/user/withdraw <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"amount":1000,"unit":"sat","invoice":"lntb100u1p0jr0ykpp5ldx3un8ym6z0uwjxd083mp2rcr04d2dv0fkx729ajs62pq9pfjqqdql23jhxapdwa5hg6rywfshwttjda6hgegcqzpgxq92fjuqsp5m6q0fzynu2qr624mzjc285duurhccmkfg94mcdctc0p9s7qkrq8q9qy9qsqp862cjznpey5r76e7amhlpmhwn2c7xvke59srhv0xf75m4ksjm4hzn8y9xy0zs5ec6gxmsr8gj4q23w8ped32llscjcneyjz2afeapqpu4gamz"}'</span>
</code></pre></div>
<p><code>POST /user/withdraw</code></p>

<p>Withdraw from LN Markets with a Lightning Invoice</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sat"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"invoice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lntb100u1p0jr0ykpp5ldx3un8ym6z0uwjxd083mp2rcr04d2dv0fkx729ajs62pq9pfjqqdql23jhxapdwa5hg6rywfshwttjda6hgegcqzpgxq92fjuqsp5m6q0fzynu2qr624mzjc285duurhccmkfg94mcdctc0p9s7qkrq8q9qy9qsqp862cjznpey5r76e7amhlpmhwn2c7xvke59srhv0xf75m4ksjm4hzn8y9xy0zs5ec6gxmsr8gj4q23w8ped32llscjcneyjz2afeapqpu4gamz"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="withdraw-via-invoice-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Payload that countains all informations to initiate a new withdraw.</td>
</tr>
<tr>
<td>» amount</td>
<td>body</td>
<td>integer</td>
<td>true</td>
<td>Amount you want to withdraw</td>
</tr>
<tr>
<td>» unit</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>Unit (Only sat for now)</td>
</tr>
<tr>
<td>» invoice</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Bolt 11 invoice with the same amount as the request withdraw amount</td>
</tr>
</tbody></table>
<h4 id='detailed-descriptions-7'>Detailed descriptions</h4>
<p><strong>body</strong>: Payload that countains all informations to initiate a new withdraw.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentsecret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1b84c9852e929f99700b6cbabc4ca9d1593afc3736938b348c4d3d143e418bd4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3fcbd8b7-c35b-4e83-87bc-111d5bd186b7"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymenthash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fb4d1e4ce4de84fe3a466bcf1d8543c0df56a9ac7a6c6f28bd9434a080a14c80"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="withdraw-via-invoice-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Funds are removed from user account and added to user wallet.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="withdraw-via-invoice-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» amount</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>Amount withdrawnd</td>
</tr>
<tr>
<td>» paymentsecret</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Payment secret of the settled invoice</td>
</tr>
<tr>
<td>» id</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Withdraw ID</td>
</tr>
<tr>
<td>» paymenthash</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Payment hash for the settled invoice</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: withdraw ), cookieAuth
</aside>
<h2 id='withdraw'>Withdraw</h2>
<p><a id="opIdV1_User_getWithdrawHistory"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/user/withdraw"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/user/withdraw</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/user/withdraw <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span>
</code></pre></div>
<p><code>GET /user/withdraw</code></p>

<p>Ge withdraw history</p>

<h3 id="withdraw-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>nbItem</td>
<td>query</td>
<td>integer</td>
<td>false</td>
<td>Maximum length of the returned table.</td>
</tr>
<tr>
<td>index</td>
<td>query</td>
<td>integer</td>
<td>false</td>
<td>Which page we want (offset = nbItem * (index - 1)).</td>
</tr>
<tr>
<td>getLength</td>
<td>query</td>
<td>boolean</td>
<td>false</td>
<td>Return the length of the date slice given.</td>
</tr>
<tr>
<td>start</td>
<td>query</td>
<td>integer</td>
<td>false</td>
<td>Start of the time interval (UNIX UTC timestamp)</td>
</tr>
<tr>
<td>end</td>
<td>query</td>
<td>integer</td>
<td>false</td>
<td>End of the time interval (UNIX UTC timestamp)</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"transaction"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"269157f3-d4a1-4493-afcb-5e8fdaa49288"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">99400</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"payment_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33f45c13c7ddcae46c6732414552893ca599f9399c62ffc2cfae209e8b17c5c3"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sucess_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="withdraw-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>History sucessfully pulled.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="withdraw-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» transaction</td>
<td>[object]</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» id</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Withdraw ID in case of withdraw</td>
</tr>
<tr>
<td>»» amount</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>Amount in sat</td>
</tr>
<tr>
<td>»» creation_ts</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>When the transaction was initiated</td>
</tr>
<tr>
<td>»» fail</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Is the transaction failed</td>
</tr>
<tr>
<td>»» fail_reason</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» fail_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>When did the withdraw failed ?</td>
</tr>
<tr>
<td>»» payment_hash</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» success</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» sucess_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: user ), cookieAuth
</aside>
<h2 id='logout'>Logout</h2>
<p><a id="opIdV1_User_logout"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/user/logout"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span><span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span> <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/user/logout</span><span class="dl">'</span><span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/user/logout
</code></pre></div>
<p><code>POST /user/logout</code></p>

<p>Delete the session cookie.</p>

<h3 id="logout-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Sucessfully logged out.</td>
<td>None</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='confirm-recovery-email-with-confirmationtoken'>Confirm recovery email with confirmationToken</h2>
<p><a id="opIdV1_User_emailConfirm"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/user/email-confirm"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s">"confirmationToken"</span><span class="p">:</span> <span class="s">"682f2afb2a551a4dd5e5e29800b95547ff54b232b2da3ffa9a97173037d464bc"</span><span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"PUT"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PUT</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/user/email-confirm</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer {access-token}</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">confirmationToken</span><span class="p">:</span> <span class="dl">'</span><span class="s1">682f2afb2a551a4dd5e5e29800b95547ff54b232b2da3ffa9a97173037d464bc</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> PUT <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/user/email-confirm <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"confirmationToken":"682f2afb2a551a4dd5e5e29800b95547ff54b232b2da3ffa9a97173037d464bc"}'</span>
</code></pre></div>
<p><code>PUT /user/email-confirm</code></p>

<p>Confirm recovery email so that the user can reset his password if he loses it</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"confirmationToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"682f2afb2a551a4dd5e5e29800b95547ff54b232b2da3ffa9a97173037d464bc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="confirm-recovery-email-with-confirmationtoken-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Payload that countains the token to confirm the recovery email.</td>
</tr>
<tr>
<td>» confirmationToken</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>One-time use token to confirm email address</td>
</tr>
</tbody></table>
<h4 id='detailed-descriptions-8'>Detailed descriptions</h4>
<p><strong>body</strong>: Payload that countains the token to confirm the recovery email.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"emailConfirmed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dogecoin@touzemoune.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="confirm-recovery-email-with-confirmationtoken-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Recovery Email is confirmed and therfore usable</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="confirm-recovery-email-with-confirmationtoken-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» confirmationSuccess</td>
<td>boolean</td>
<td>true</td>
<td>none</td>
<td>Success of the recovery email confirmation</td>
</tr>
<tr>
<td>» confirmedEmail</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>Recovery email address confirmed</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth ( Scopes: user ), cookieAuth
</aside>

<h1 id="api-state">State</h1>

<p>LN Markets state with data about our node and api availability</p>
<h2 id='api-informations'>API informations</h2>
<p><a id="opIdV1_State_apiState"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/state"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/state</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/state <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span>
</code></pre></div>
<p><code>GET /state</code></p>

<p>Shows informations about api.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1600244845097</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="s2">"74958cef7d4416dfa7f2c13fd23cd4aa7b469047"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"soec"</span><span class="p">:</span><span class="w"> </span><span class="s2">"31a4964e0ab4c77e7235ce5a0b458ba32dd8ace8"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"withdraw"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"newPosition"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountCreation"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="api-informations-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>The API is online.</td>
<td>Inline</td>
</tr>
</tbody></table>

<h3 id="api-informations-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» ts</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Timestamp reported by the API</td>
</tr>
<tr>
<td>» version</td>
<td>object</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» api</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>API version hash</td>
</tr>
<tr>
<td>»» spec</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Open API version hash</td>
</tr>
<tr>
<td>» withdraw</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Are withdraw enabled ?</td>
</tr>
<tr>
<td>» newposition</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Are new position enabled ?</td>
</tr>
<tr>
<td>» accountCreation</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Are account creation enabled ?</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='node-informations'>Node informations</h2>
<p><a id="opIdV1_State_nodeState"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/state/node"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/state/node</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/state/node <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span>
</code></pre></div>
<p><code>GET /state/node</code></p>

<p>Shows informations about the lightning node.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.11.0-beta commit=v0.11.0-beta'"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LN Markets"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pubkey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03bae2db4b57738c1ec1ffa1c5e5a4423968cc592b3b39cddf7d495e72919d6431"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"blockHeigth"</span><span class="p">:</span><span class="w"> </span><span class="mi">1835008</span><span class="p">,</span><span class="w">
  </span><span class="nl">"remoteBalance"</span><span class="p">:</span><span class="w"> </span><span class="mi">266903254</span><span class="p">,</span><span class="w">
  </span><span class="nl">"example"</span><span class="p">:</span><span class="w"> </span><span class="s2">"localBalance"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"channels"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="p">,</span><span class="w">
  </span><span class="nl">"peers"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
  </span><span class="nl">"onionUri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03bae2db4b57738c1ec1ffa1c5e5a4423968cc592b3b39cddf7d495e72919d6431@3pv4ci27cnahbztwlqtbez36rblecanoyxthrtjvxpk3en2y7dxfr3id.onion:9735"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03bae2db4b57738c1ec1ffa1c5e5a4423968cc592b3b39cddf7d495e72919d6431@34.192.102.161:9735"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="node-informations-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>The Node is online.</td>
<td>Inline</td>
</tr>
</tbody></table>

<h3 id="node-informations-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» version</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>LND version</td>
</tr>
<tr>
<td>» alias</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Node Alias</td>
</tr>
<tr>
<td>» pubkey</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Node pubkey</td>
</tr>
<tr>
<td>» uri</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Node URI</td>
</tr>
<tr>
<td>» onionUri</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Node URI on tor</td>
</tr>
<tr>
<td>» peers</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Number of peers</td>
</tr>
<tr>
<td>» channels</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Number of channels</td>
</tr>
<tr>
<td>» localBalance</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Node local balance</td>
</tr>
<tr>
<td>» remoteBalance</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Node remote balance</td>
</tr>
<tr>
<td>» blockHeigth</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Node block heigth</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>

<h1 id="api-lnurl">LNURL</h1>

<p>Interaction with the lightning network using the <a href="https://github.com/btcontract/lnurl-rfc/">LNURL procotocol</a>
LNURL enable simple auth process and easier withdraw</p>
<h2 id='auth-2'>Auth 2</h2>
<p><a id="opIdV1_GET_LNURL_Auth"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/lnurl/auth"</span>

<span class="n">querystring</span> <span class="o">=</span> <span class="p">{</span><span class="s">"tag"</span><span class="p">:</span><span class="s">"login"</span><span class="p">,</span><span class="s">"k1"</span><span class="p">:</span><span class="s">"kyNVmR6HDtAW2aplYk6XmmpDrIhvzzq6"</span><span class="p">,</span><span class="s">"sig"</span><span class="p">:</span><span class="s">"qep5sAqwleQS27UdKLGNsCBTWB4soS45us9vJAbk1hMEdCAXoeB6IESi3Nz7SXJM"</span><span class="p">,</span><span class="s">"key"</span><span class="p">:</span><span class="s">"Yc4h1Z5BZVmgmVQfIbdPWRVj9kHAo3uf"</span><span class="p">,</span><span class="s">"hmac"</span><span class="p">:</span><span class="s">"kuSHSXXDiP4qofiL2LGelesLLlRXUCJd"</span><span class="p">}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">querystring</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/lnurl/auth</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">tag</span><span class="p">:</span> <span class="dl">'</span><span class="s1">login</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">k1</span><span class="p">:</span> <span class="dl">'</span><span class="s1">kyNVmR6HDtAW2aplYk6XmmpDrIhvzzq6</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">sig</span><span class="p">:</span> <span class="dl">'</span><span class="s1">qep5sAqwleQS27UdKLGNsCBTWB4soS45us9vJAbk1hMEdCAXoeB6IESi3Nz7SXJM</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">key</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Yc4h1Z5BZVmgmVQfIbdPWRVj9kHAo3uf</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">hmac</span><span class="p">:</span> <span class="dl">'</span><span class="s1">kuSHSXXDiP4qofiL2LGelesLLlRXUCJd</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> <span class="s1">'https://api.lnmarkets.com/v1/lnurl/auth?tag=login&amp;k1=kyNVmR6HDtAW2aplYk6XmmpDrIhvzzq6&amp;sig=qep5sAqwleQS27UdKLGNsCBTWB4soS45us9vJAbk1hMEdCAXoeB6IESi3Nz7SXJM&amp;key=Yc4h1Z5BZVmgmVQfIbdPWRVj9kHAo3uf&amp;hmac=kuSHSXXDiP4qofiL2LGelesLLlRXUCJd'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span>
</code></pre></div>
<p><code>GET /lnurl/auth</code></p>

<p>Verify the public key with the signature and the k1 to create a account or connect into a existing account.
If JWT is set to true, a JWT will be returned with by default all scopes and an expiry of 1h, they can be changed by setting the query paramater expiry or scopes like POST /user/jwt.
Else the connected state will be push over websocketsto the client.</p>

<h3 id="auth-2-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tag</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>LNURL type.</td>
</tr>
<tr>
<td>k1</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>Hex encoded 32 bytes of challenge which is going to be signed by user private key.</td>
</tr>
<tr>
<td>sig</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>Signature generated by the lightning wallet.</td>
</tr>
<tr>
<td>key</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>Public key of the lightning wallet.</td>
</tr>
<tr>
<td>hmac</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>HMAC signature used to secure LNURL.</td>
</tr>
<tr>
<td>t</td>
<td>query</td>
<td>string</td>
<td>false</td>
<td>Timestamp.</td>
</tr>
<tr>
<td>jwt</td>
<td>query</td>
<td>boolean</td>
<td>false</td>
<td>Request will responsd with a JWT token instead of pushing auth state to websocket</td>
</tr>
<tr>
<td>expiry</td>
<td>query</td>
<td>integer(int32)</td>
<td>false</td>
<td>JWT expiration, default to 3600</td>
</tr>
<tr>
<td>scopes</td>
<td>query</td>
<td>string</td>
<td>false</td>
<td>Scope of the jwt</td>
</tr>
</tbody></table>
<h4 id='enumerated-values-6'>Enumerated Values</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>tag</td>
<td>login</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LOGGEDIN"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="auth-2-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Sucessfuly logged in.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="auth-2-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» status</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Does the request suceed ?</td>
</tr>
<tr>
<td>» event</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>State of the user</td>
</tr>
<tr>
<td>» token</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>JWT if asked</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='auth'>Auth</h2>
<p><a id="opIdV1_POST_LNURL_Auth"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/lnurl/auth"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/lnurl/auth</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/lnurl/auth <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span>
</code></pre></div>
<p><code>POST /lnurl/auth</code></p>

<p>LNURL string used to create an account or connect to a existing account.
The user wallet will sign a message using the provided k1 inside the LNURL.
You need to have a session cookie on the browser you are using to log in.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"lnurl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lnurl1dp68gup69uhkcmmrv9kxsmmnwsarxvpsxqhkcmn4wfkz7cflw3skw0tvdankjm3xdvcn6venvgcrjenpx3nrwdtpxsur2vfsvdjk2dfkxe3kgceexymkgcmrxpjkgc3jvgmrqdnzvvurjwtr89jk2dp4vccrxvmrvvmxzdehxuejv6rdv93n6wpkv56rxcf4xqcxgwfsvsuxget9vymnqcfnv43rgwfjv5ex2cn9vyckgwtyvejrgc3excekyetpx43rvd3nxeskxvm9xqcxvwtpv5mq9uwr0k"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="auth-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Bech32 encoded string.</td>
<td>Inline</td>
</tr>
</tbody></table>

<h3 id="auth-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» lnurl</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>LNURL used by the wallet</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='withdraw-3'>Withdraw 3</h2>
<p><a id="opIdV1_LNURL_Withdraw"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/lnurl/withdraw"</span>

<span class="n">querystring</span> <span class="o">=</span> <span class="p">{</span><span class="s">"k1"</span><span class="p">:</span><span class="s">"kyNVmR6HDtAW2aplYk6XmmpDrIhvzzq6"</span><span class="p">,</span><span class="s">"pr"</span><span class="p">:</span><span class="s">"&lt;invoice&gt;"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">querystring</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/lnurl/withdraw</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="p">{</span><span class="na">k1</span><span class="p">:</span> <span class="dl">'</span><span class="s1">kyNVmR6HDtAW2aplYk6XmmpDrIhvzzq6</span><span class="dl">'</span><span class="p">,</span> <span class="na">pr</span><span class="p">:</span> <span class="dl">'</span><span class="s1">&lt;invoice&gt;</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> <span class="s1">'https://api.lnmarkets.com/v1/lnurl/withdraw?k1=kyNVmR6HDtAW2aplYk6XmmpDrIhvzzq6&amp;pr=%3Cinvoice%3E'</span>
</code></pre></div>
<p><code>GET /lnurl/withdraw</code></p>

<p>Use LNURL to withdraw from the user balance.</p>

<h3 id="withdraw-3-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>k1</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>Random hex string to identify the user Lightning Wallet.</td>
</tr>
<tr>
<td>pr</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>Bolt 11 invoice.</td>
</tr>
</tbody></table>

<h3 id="withdraw-3-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Sucessfuly withdrawn funds from channel.</td>
<td>None</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='create-a-lnurl-withdraw'>Create a LNURL Withdraw</h2>
<p><a id="opIdV1_POST_LNURL_withdraw"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/lnurl/withdraw"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s">"amount"</span><span class="p">:</span> <span class="mi">1000</span><span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/lnurl/withdraw</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span> <span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span><span class="na">amount</span><span class="p">:</span> <span class="mi">1000</span><span class="p">},</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/lnurl/withdraw <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"amount":1000}'</span>
</code></pre></div>
<p><code>POST /lnurl/withdraw</code></p>

<p>Create a LNURL Withdraw</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="create-a-lnurl-withdraw-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Amount to withdraw</td>
</tr>
<tr>
<td>» amount</td>
<td>body</td>
<td>integer</td>
<td>true</td>
<td>amount you want to withdraw</td>
</tr>
<tr>
<td>» unit</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>Unit (Only sat for now)</td>
</tr>
</tbody></table>
<h4 id='enumerated-values-7'>Enumerated Values</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>» unit</td>
<td>sat</td>
</tr>
<tr>
<td>» unit</td>
<td>msat</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"lnurl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LNURL1DP68GURN8GHJ7UM9WFMXJCM99E3K7MF0V9CXJ0M385EKVCENXC6R2C35XVUKXEFCV5MKVV34X5EKZD3EV56NYD3HXQURZEPEXEJXXEPNXSCRVWFNV9NXZCN9XQ6XYEFHVGCXXCMYXYMNSERXFQ5FNS"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="create-a-lnurl-withdraw-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Return the LNURL</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="create-a-lnurl-withdraw-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» lnurl</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>LNURL for the users wallet</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
cookieAuth
</aside>
<h2 id='withdraw-2'>Withdraw 2</h2>
<p><a id="opIdV1_LNURL_WithdrawRequest"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/lnurl/withdraw/request"</span>

<span class="n">querystring</span> <span class="o">=</span> <span class="p">{</span><span class="s">"signature"</span><span class="p">:</span><span class="s">"type,string"</span><span class="p">,</span><span class="s">"n"</span><span class="p">:</span><span class="s">"type,string,minLength,64,maxLength,64"</span><span class="p">,</span><span class="s">"expiry"</span><span class="p">:</span><span class="s">"1599841538304"</span><span class="p">}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">querystring</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/lnurl/withdraw/request</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">signature</span><span class="p">:</span> <span class="dl">'</span><span class="s1">type,string</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">n</span><span class="p">:</span> <span class="dl">'</span><span class="s1">type,string,minLength,64,maxLength,64</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">expiry</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1599841538304</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> <span class="s1">'https://api.lnmarkets.com/v1/lnurl/withdraw/request?signature=type%2Cstring&amp;n=type%2Cstring%2CminLength%2C64%2CmaxLength%2C64&amp;expiry=1599841538304'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span>
</code></pre></div>
<p><code>GET /lnurl/withdraw/request</code></p>

<p>Ask the Lightning wallet to create an invoice with amount and description.</p>

<h3 id="withdraw-2-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>signature</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>HMAC payload signature.</td>
</tr>
<tr>
<td>n</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>Nonce.</td>
</tr>
<tr>
<td>expiry</td>
<td>query</td>
<td>integer</td>
<td>true</td>
<td>Timestamp when the LNURL is expired.</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"k1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"31c92c1bd79d2ae5f96a153ceda105cb67888c61bfb76baa1d2505a6bf8a06ca"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"withdrawRequest"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"maxWithdrawable"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"minWithdrawable"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"defaultDescription"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LN Markets withdraw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"callback"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.lnmarkets.com/lnurl/w"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="withdraw-2-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>LNURL withdraw invoice parameter.</td>
<td>Inline</td>
</tr>
</tbody></table>

<h3 id="withdraw-2-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» callback</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Callback URL used by the wallet</td>
</tr>
<tr>
<td>» defaultDescription</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Invoice default description</td>
</tr>
<tr>
<td>» tag</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Kind of LNURL</td>
</tr>
<tr>
<td>» balanceCheck</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>» balanceNotify</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>» maxWithdrawable</td>
<td>integer(int32)</td>
<td>false</td>
<td>none</td>
<td>Max withdrawable amount</td>
</tr>
<tr>
<td>» minWithdrawable</td>
<td>integer(int32)</td>
<td>false</td>
<td>none</td>
<td>Min withdrawable amount</td>
</tr>
<tr>
<td>» k1</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Random hex string to identify the user Lightning Wallet.</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>

<h1 id="api-leaderboard">Leaderboard</h1>
<h2 id='get-current-leaderboard'>Get current Leaderboard</h2>
<p><a id="opIdV1_Leaderboard_getLeaderboard"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/state/leaderboard"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/state/leaderboard</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/state/leaderboard <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span>
</code></pre></div>
<p><code>GET /state/leaderboard</code></p>

<p>Queries the database to get the 10 users with the biggest posititve PL</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">4242424242</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jean-Kevin"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">3491941</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Roger"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">24013441</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Laura"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">23126094</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Marcus"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">1414019</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Charles"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">242918</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Antoine"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">99999</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXxRoBeRtLeBgDu24xXX"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">61491</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CRYPTOKING"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HEY"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<h3 id="get-current-leaderboard-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Leaderboard successfully fetched</td>
<td>Inline</td>
</tr>
</tbody></table>

<h3 id="get-current-leaderboard-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» username</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Username or &#39;Anonymous&#39; if the Leaderboard view is disabled</td>
</tr>
<tr>
<td>» pl</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>Sum of every profits and losses of the user</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>

<h1 id="api-announcements">Announcements</h1>
<h2 id='get-the-ln-markets-announcements'>Get the LN Markets announcements</h2>
<p><a id="opIdV1_Announcements_getAnnouncements"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/state/announcements"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://api.lnmarkets.com/v1/state/announcements</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Accept</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/state/announcements <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span>
</code></pre></div>
<p><code>GET /state/announcements</code></p>

<p>Get the LN Markets announcements</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Good news everyone !"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bitcoin is the world money now !"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creation_ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1607076175239</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bad news everyone !"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We have too much sats"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creation_ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1607019462532</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<h3 id="get-the-ln-markets-announcements-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Announcements successfully fetched</td>
<td>Inline</td>
</tr>
</tbody></table>

<h3 id="get-the-ln-markets-announcements-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» title</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>» text</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>» ts</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>

<p>undefined</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">curl</a>
                <a href="#" data-language-name="javascript--node">Node.js</a>
                <a href="#" data-language-name="python">Python</a>
          </div>
      </div>
    </div>
  </body>
</html>
