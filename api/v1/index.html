
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>LN Markets API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sa, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-c9d8fa83.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-e9bde216.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;javascript--node&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-097334dc.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">curl</a>
              <a href="#" data-language-name="javascript--node">Node.js</a>
              <a href="#" data-language-name="python">Python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#rest" class="toc-h2 toc-link" data-title="REST">REST</a>
                  </li>
                  <li>
                    <a href="#authentication" class="toc-h2 toc-link" data-title="Authentication">Authentication</a>
                  </li>
                  <li>
                    <a href="#making-a-request" class="toc-h2 toc-link" data-title="Making a request">Making a request</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#websockets" class="toc-h1 toc-link" data-title="Websockets">Websockets</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#authentication" class="toc-h2 toc-link" data-title="Authentication">Authentication</a>
                  </li>
                  <li>
                    <a href="#heartbeats" class="toc-h2 toc-link" data-title="Heartbeats">Heartbeats</a>
                  </li>
                  <li>
                    <a href="#subscription" class="toc-h2 toc-link" data-title="Subscription">Subscription</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#limits" class="toc-h1 toc-link" data-title="Limits">Limits</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#positions" class="toc-h2 toc-link" data-title="Positions">Positions</a>
                  </li>
                  <li>
                    <a href="#rate" class="toc-h2 toc-link" data-title="Rate">Rate</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
          <li>
            <a href="#api" class="toc-h1 toc-link" data-title="API v1.0.0">API v1.0.0</a>
          </li>
          <li>
            <a href="#api-login" class="toc-h1 toc-link" data-title="Login">Login</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#login-with-a-jwt" class="toc-h2 toc-link" data-title="Login with a JWT">Login with a JWT</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api-futures" class="toc-h1 toc-link" data-title="Futures">Futures</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create" class="toc-h2 toc-link" data-title="Create">Create</a>
                  </li>
                  <li>
                    <a href="#update" class="toc-h2 toc-link" data-title="Update">Update</a>
                  </li>
                  <li>
                    <a href="#close" class="toc-h2 toc-link" data-title="Close">Close</a>
                  </li>
                  <li>
                    <a href="#history" class="toc-h2 toc-link" data-title="History">History</a>
                  </li>
                  <li>
                    <a href="#futures-index-history" class="toc-h2 toc-link" data-title="Futures index history">Futures index history</a>
                  </li>
                  <li>
                    <a href="#futures-bid-and-offer-history" class="toc-h2 toc-link" data-title="Futures bid and offer history">Futures bid and offer history</a>
                  </li>
                  <li>
                    <a href="#futures-fixing-history" class="toc-h2 toc-link" data-title="Futures fixing history">Futures fixing history</a>
                  </li>
                  <li>
                    <a href="#cancel" class="toc-h2 toc-link" data-title="Cancel">Cancel</a>
                  </li>
                  <li>
                    <a href="#cash-in" class="toc-h2 toc-link" data-title="Cash-in">Cash-in</a>
                  </li>
                  <li>
                    <a href="#add-margin" class="toc-h2 toc-link" data-title="Add margin">Add margin</a>
                  </li>
                  <li>
                    <a href="#close-all" class="toc-h2 toc-link" data-title="Close-all">Close-all</a>
                  </li>
                  <li>
                    <a href="#cancel-all" class="toc-h2 toc-link" data-title="Cancel-all">Cancel-all</a>
                  </li>
                  <li>
                    <a href="#futures-carry-fees-history" class="toc-h2 toc-link" data-title="Futures carry fees history">Futures carry fees history</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api-user" class="toc-h1 toc-link" data-title="User">User</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#informations" class="toc-h2 toc-link" data-title="Informations">Informations</a>
                  </li>
                  <li>
                    <a href="#update-user" class="toc-h2 toc-link" data-title="Update user">Update user</a>
                  </li>
                  <li>
                    <a href="#deposit" class="toc-h2 toc-link" data-title="Deposit">Deposit</a>
                  </li>
                  <li>
                    <a href="#deposit-history" class="toc-h2 toc-link" data-title="Deposit History">Deposit History</a>
                  </li>
                  <li>
                    <a href="#withdraw-via-invoice" class="toc-h2 toc-link" data-title="Withdraw via invoice">Withdraw via invoice</a>
                  </li>
                  <li>
                    <a href="#withdraw-history" class="toc-h2 toc-link" data-title="Withdraw History">Withdraw History</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api-state" class="toc-h1 toc-link" data-title="State">State</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#leaderboard" class="toc-h2 toc-link" data-title="Leaderboard">Leaderboard</a>
                  </li>
                  <li>
                    <a href="#api" class="toc-h2 toc-link" data-title="API">API</a>
                  </li>
                  <li>
                    <a href="#node" class="toc-h2 toc-link" data-title="Node">Node</a>
                  </li>
                  <li>
                    <a href="#announcements" class="toc-h2 toc-link" data-title="Announcements">Announcements</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://lnmarkets.com/'>LN Markets - Mainnet</a></li>
            <li><a href='https://testnet.lnmarkets.com/'>LN Markets - Testnet</a></li>
            <li><a href='https://twitter.com/LNMarkets'>Twitter</a></li>
            <li><a href='https://www.t.me/lnmarkets'>Telegram</a></li>
            <li><a href='https://lnmarkets.substack.com/'>Newsletter</a></li>
            <li><a href='https://github.com/ln-markets'>Github</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>LN Markets opens a simple REST API to integrate with your program or trading bot.</p>

<p>This API reference provides information on available endpoints and how to interact with it.</p>

<p>The API endpoint for mainnet is: <code>https://api.lnmarkets.com/v1</code></p>

<aside class="notice">
If you want to try our API with <bold>testnet</bold> bitcoin use <code>https://api.testnet.lnmarkets.com</code>
</aside>
<h2 id='rest'>REST</h2><h2 id='authentication'>Authentication</h2>
<p>API key authentication requires each request to be signed (enhanced security measure).</p>

<p>You can create and activate new API keys in your API <a href="https://lnmarkets.com/user/api">here</a>.</p>

<p>Your API keys should be assigned to access only accounts and permission scopes that are necessary for your app to function.</p>
<h2 id='making-a-request'>Making a request</h2>
<p>All REST requests must contain the following headers:</p>

<ul>
<li><strong>LNM-ACCESS-KEY</strong> API key as a string</li>
<li><strong>LNM-ACCESS-SIGN</strong> Message signature</li>
<li><strong>LNM-ACCESS-PASSPHRASE</strong> API key passphrase</li>
<li><strong>LNM-ACCESS-TIMESTAMP</strong> Timestamp for your request</li>
</ul>

<p>All request bodies should have content type <strong>application/json</strong> and be valid JSON.</p>

<p>Example :</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl https://api.lnmarkets.com/v1/user <span class="se">\</span>
  <span class="nt">--header</span> <span class="s2">"LNM-ACCESS-KEY: &lt;your api key&gt;"</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s2">"LNM-ACCESS-PASSPHRASE: &lt;your api key passphrase&gt;"</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s2">"LNM-ACCESS-SIGN: &lt;the user generated message signature&gt;"</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s2">"LNM-ACCESS-TIMESTAMP: &lt;a timestamp for your request&gt;"</span>
</code></pre></div>
<p>The <strong>LNM-ACCESS-SIGN</strong> header is generated by creating a sha256 HMAC using the secret key on the prehash string <code>timestamp + method + path + params</code> (where + represents string concatenation).</p>

<p>The <code>timestamp</code> value is the same as the LNM-ACCESS-TIMESTAMP header.
The timestamp MUST be number of seconds since Unix Epoch in UTC and it should be within 30seconds of our API time</p>

<p>The <code>params</code> is the request body or query parameters stringified with json.</p>

<p>The <code>method</code> should be UPPER CASE.</p>

<p>The <code>path</code> is the request path of the URL, e.g.: <em>/v1/user</em></p>

<p>Here is an example in javascript</p>
<div class="highlight"><pre class="highlight plaintext"><code>const https = require('https')
const { createHmac } = require('crypto')
const { URLSearchParams } = require('url')

const requestAPI = (options) =&gt; {
  return new Promise((resolve, reject) =&gt; {
    const req = https.request(options, (res) =&gt; {
      res.setEncoding('utf8')

      let data = ''

      res.on('data', (chunk) =&gt; {
        data += chunk
      })

      res.on('error', (error) =&gt; {
        reject(error)
      })

      res.on('end', () =&gt; {
        if (this.debug) {
          return resolve({ req, res })
        }

        try {
          const body = JSON.parse(data)

          if (res.statusCode === 200) {
            resolve(body)
          } else {
            console.error(body)
            reject(new Error(res.statusCode, body))
          }
        } catch (error) {
          error.data = data
          reject(error)
        }
      })
    })

    req.on('error', (error) =&gt; {
      reject(error)
    })

    if (options.method.match(/^(PUT|POST)$/) &amp;&amp; options.params) {
      req.write(JSON.stringify(options.params))
    }

    req.end()
  })
}

const main = async () =&gt; {
  const key = 'API_KEY'
  const secret = 'API_SECRET'
  const passphrase = 'API_PASSPHRASE'
  const timestamp = Date.now()

  const params = { type: 'm', side: 'b', quantity: 4242 }

  const method = `POST`
  const path = `/v1/futures`

  const payload = `${timestamp}${method}${path}${JSON.stringify(params)}`

  const signature = createHmac('sha256', secret)
    .update(payload)
    .digest('base64')

  const headers = {
    'Content-Type': 'application/json',
    'LNM-ACCESS-KEY': key,
    'LNM-ACCESS-PASSPHRASE': passphrase,
    'LNM-ACCESS-TIMESTAMP': timestamp,
    'LNM-ACCESS-SIGNATURE': signature,
  }

  const options = {
    port: 443,
    hostname: 'api.lnmarkets.com',
    method,
    path,
    headers,
  }

  if (method.match(/^(GET|DELETE)$/) &amp;&amp; params) {
    options.path += `?${new URLSearchParams(params).toString()}`
  }

  const position = await requestAPI(options)
  console.log(position)
}

main()

</code></pre></div>
<p>If you want a full implementation example you can take a look at our npm package <a href="https://www.npmjs.com/package/@ln-markets/api">@ln-markets/api</a></p>
<h1 id='websockets'>Websockets</h1>
<p>You can find a websockets endpoint where you can gather realtime data from LN Markets such as bid, offer, index, and last price.</p>

<p>The websocket endpoint for mainnet is: <code>wss://api.lnmarkets.com</code></p>

<p>The websocket API follow the <a href="https://www.jsonrpc.org/specification">JSON-RPC</a> spec</p>

<p>Request sent to the api should be a valid JSON like this</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"debug/echo"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"faffssdfsdf432"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Random</span><span class="w"> </span><span class="err">id</span><span class="w">
  </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"hello"</span><span class="p">:</span><span class="w"> </span><span class="s2">"world"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>And response will look like this</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"faffssdfsdf432"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Same</span><span class="w"> </span><span class="err">id</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"hello"</span><span class="p">:</span><span class="w"> </span><span class="s2">"world"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>If you wish to have a response you need to listen of the id provided in the request</p>
<h2 id='authentication'>Authentication</h2>
<p>To create an authenticated websocket you need to send a payload one time to be authentificated.</p>

<p>The payload should be like this</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth/api-key"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1636389122390</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">current</span><span class="w"> </span><span class="err">timestamp</span><span class="w">
    </span><span class="nl">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SAFiGx46GGqztiHu31Mfm89VT3Cp0kqhap4DEs6Pv/U="</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">HMAC</span><span class="w"> </span><span class="err">SHA</span><span class="mi">256</span><span class="w"> </span><span class="err">(method</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="err">timestamp)</span><span class="w"> </span><span class="err">Base</span><span class="w"> </span><span class="mi">64</span><span class="w">
    </span><span class="nl">"passphrase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fd026g0d4i52"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Your</span><span class="w"> </span><span class="err">passphrase</span><span class="w">
    </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DKJLy/OlXQqQgbT0bE18HJgzQOJnuaTW43OQD8EEHuM="</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Your</span><span class="w"> </span><span class="err">api</span><span class="w"> </span><span class="err">key</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Here is an example about how doing it with javascript</p>
<div class="highlight"><pre class="highlight plaintext"><code>const Websocket = require('ws')

const ws = new Websocket('wss://api.lnmarkets.com')

const key = 'API_KEY'
const secret = 'API_SECRET'
const passphrase = 'API_PASSPHRASE'

const timestamp = Date.now()
const method = `auth/api-key`
const payload = `${timestamp}${method}`

const signature = createHmac('sha256', secret)
  .update(payload)
  .digest('base64')

const request = {
  jsonrpc: '2.0',
  method,
  params: {
    timestamp,
    signature,
    passphrase,
    key,
  },
}

ws.on('message', console.log)
ws.send(JSON.stringify(request))
</code></pre></div>
<p>If you want a full implementation example you can take a look at our npm package <a href="https://www.npmjs.com/package/@ln-markets/api">@ln-markets/api</a></p>
<h2 id='heartbeats'>Heartbeats</h2>
<p>Some WebSocket libraries are better than others at detecting connection drops. If your websocket library supports hybi-13, or ping/pong, you may send a ping at any time and the server will return with a pong.</p>

<p>Due to changes in browser power-saving modes, we no longer support expectant pings via the WebSocket API.</p>

<p>If you are concerned about your connection silently dropping, we recommend implementing the following flow:</p>

<p>After receiving each message, set a timer a duration of 5 seconds.
If any message is received before that timer fires, restart the timer.
When the timer fires (no messages received in 5 seconds), send a raw ping frame (if supported) or the literal string &#39;ping&#39;.
Expect a raw pong frame or the literal string &#39;pong&#39; in response. If this is not received within 5 seconds, throw an error or reconnect.</p>
<h2 id='subscription'>Subscription</h2>
<p>You can subscribe to differents events using the <code>subscribe</code> method</p>

<p>If you wish to unsubscribe call the <code>unsubscribe</code> and wich events you want to be unsubscribed</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"futures/market/bid-offer"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"futures/market/index"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"options/data/forwards"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"options/data/volcurve"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"options/data/ordermap"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div><h1 id='limits'>Limits</h1><h2 id='positions'>Positions</h2>
<p>There is a maximum of 50 open positions per account.</p>
<h2 id='rate'>Rate</h2>
<p>Requests to our REST API are rate limited to 1 request per second.</p>

<p>Endpoints which do not require authentication are limited to 30 requests per minute.</p>

<p>If you throw too much error such as 4XX or 5XX, your IP could be banned for a certain period of time.</p>
<h3 id='headers'>Headers</h3>
<table><thead>
<tr>
<th>Header</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Retry-After</td>
<td>14</td>
</tr>
<tr>
<td>X-Ratelimit-Remaining</td>
<td>0</td>
</tr>
<tr>
<td>X-Ratelimit-Reset</td>
<td>1601997680244</td>
</tr>
</tbody></table>

<p><br/></p>

<p>Retry-After : Will tell you how many seconds you need to wait to call this endpoint if your limit is down to 0.</p>

<p>X-Ratelimit-Remaining : This is how many request do you have left.</p>

<p>X-Ratelimit-Reset: This is the timestamp in ms when you will be granted new points.</p>
<h1 id='errors'>Errors</h1>
<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- Your api key has the wrong scope.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- Not Found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a ressource with an invalid method.</td>
</tr>
<tr>
<td>418</td>
<td>I&#39;m a teapot.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- Your connection is being rate limited</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- Something went wrong !</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>
<!-- Generator: Widdershins v4.0.1 -->

<h1 id="api">API v1.0.0</h1>

<blockquote>
<p>Scroll down for code samples, example requests and responses. Select a language for code samples from the tabs above or the mobile navigation menu.</p>
</blockquote>

<p>Trade derivatives on the <strong><a href="https://lightning.network/">Lightning Network</a></strong>.
You can find our website <strong><a href="https://lnmarkets.com/">here</a></strong>.</p>

<p>Base URLs:</p>

<ul>
<li><p><a href="https://api.lnmarkets.com/v1">https://api.lnmarkets.com/v1</a></p></li>
<li><p><a href="https://api.testnet.lnmarkets.com/v1">https://api.testnet.lnmarkets.com/v1</a></p></li>
</ul>

<h1 id="api-login">Login</h1>

<p>Here you can find the different way to auth yourself on LN Markets, mostly use for browser.</p>
<h2 id='login-with-a-jwt'>Login with a JWT</h2>
<p><a id="opIdV1_Login_loginCredentials"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/login/token"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"object"</span><span class="p">,</span>
    <span class="s">"additionalProperties"</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
    <span class="s">"required"</span><span class="p">:</span> <span class="p">[</span><span class="s">"token"</span><span class="p">],</span>
    <span class="s">"properties"</span><span class="p">:</span> <span class="p">{</span><span class="s">"token"</span><span class="p">:</span> <span class="p">{</span><span class="s">"type"</span><span class="p">:</span> <span class="s">"string"</span><span class="p">}}</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/login/token</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">additionalProperties</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="na">required</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">token</span><span class="dl">'</span><span class="p">],</span>
  <span class="na">properties</span><span class="p">:</span> <span class="p">{</span><span class="na">token</span><span class="p">:</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">}}</span>
<span class="p">}));</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/login/token <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"type":"object","additionalProperties":false,"required":["token"],"properties":{"token":{"type":"string"}}}'</span>
</code></pre></div>
<p><code>POST /login/token</code></p>

<p>Use a JWT to log on LN Markets.
The token need to have the &#39;user&#39; scope and the token will be revoked ater the sucessfull login</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"additionalProperties"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"token"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="login-with-a-jwt-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» token</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lnmarkets"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"account_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credentials"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="login-with-a-jwt-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Successfuly logged into the account.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="login-with-a-jwt-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» username</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>User choosen username (May differe from login)</td>
</tr>
<tr>
<td>» balance</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>User current balance</td>
</tr>
<tr>
<td>» account_type</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>User account type, here credentials</td>
</tr>
</tbody></table>
<h3 id='response-headers'>Response Headers</h3>
<table><thead>
<tr>
<th>Status</th>
<th>Header</th>
<th>Type</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>Set-Cookie</td>
<td>string</td>
<td></td>
<td>none</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>

<h1 id="api-futures">Futures</h1>

<p>Interactions with the futures market and retrive your positions</p>
<h2 id='create'>Create</h2>
<p><a id="opIdV1_Futures_createPosition"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"l"</span><span class="p">,</span>
    <span class="s">"side"</span><span class="p">:</span> <span class="s">"b"</span><span class="p">,</span>
    <span class="s">"price"</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
    <span class="s">"stoploss"</span><span class="p">:</span> <span class="mi">9000</span><span class="p">,</span>
    <span class="s">"takeprofit"</span><span class="p">:</span> <span class="mi">11000</span><span class="p">,</span>
    <span class="s">"quantity"</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s">"leverage"</span><span class="p">:</span> <span class="mi">50</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/futures</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Bearer {access-token}</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">l</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">side</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">price</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
  <span class="na">stoploss</span><span class="p">:</span> <span class="mi">9000</span><span class="p">,</span>
  <span class="na">takeprofit</span><span class="p">:</span> <span class="mi">11000</span><span class="p">,</span>
  <span class="na">quantity</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
  <span class="na">leverage</span><span class="p">:</span> <span class="mi">50</span>
<span class="p">}));</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/futures <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"type":"l","side":"b","price":10000,"stoploss":9000,"takeprofit":11000,"quantity":100,"leverage":50}'</span>
</code></pre></div>
<p><code>POST /futures</code></p>

<p>Send the order form parameters to add a new position in database.
<strong>If <code>type=&quot;l&quot;</code>, the property <code>price</code> must be included in the request to know when the position should be filled.</strong>
<strong>You can choose to use the margin or the quantity as a parameter, the other will be calculated with the one you choosed</strong></p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"l"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"stoploss"</span><span class="p">:</span><span class="w"> </span><span class="mi">9000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"takeprofit"</span><span class="p">:</span><span class="w"> </span><span class="mi">11000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
  </span><span class="nl">"leverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="create-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Payload with all the information needed to setup a new position.</td>
</tr>
<tr>
<td>» type</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Type of the order (Market or Limit)</td>
</tr>
<tr>
<td>» side</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Side of the order (Buy or Sell)</td>
</tr>
<tr>
<td>» margin</td>
<td>body</td>
<td>integer(int32)</td>
<td>false</td>
<td>Margin or quantity should be filled</td>
</tr>
<tr>
<td>» leverage</td>
<td>body</td>
<td>number(double)</td>
<td>true</td>
<td>Leverage of the order</td>
</tr>
<tr>
<td>» quantity</td>
<td>body</td>
<td>number</td>
<td>false</td>
<td>Quantity or margin should be filled</td>
</tr>
<tr>
<td>» takeprofit</td>
<td>body</td>
<td>number(double)</td>
<td>false</td>
<td>Takeprofit level</td>
</tr>
<tr>
<td>» stoploss</td>
<td>body</td>
<td>number(double)</td>
<td>false</td>
<td>Stoploss level</td>
</tr>
<tr>
<td>» price</td>
<td>body</td>
<td>number(double)</td>
<td>false</td>
<td>Required when using a limit order</td>
</tr>
</tbody></table>
<h4 id='detailed-descriptions'>Detailed descriptions</h4>
<p><strong>body</strong>: Payload with all the information needed to setup a new position.</p>
<h4 id='enumerated-values'>Enumerated Values</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>» type</td>
<td>l</td>
</tr>
<tr>
<td>» type</td>
<td>m</td>
</tr>
<tr>
<td>» side</td>
<td>b</td>
</tr>
<tr>
<td>» side</td>
<td>s</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"249dc818-f8a5-4713-a3a3-8fe85f2e8969"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">666</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"takeprofit_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"takeprofit"</span><span class="p">:</span><span class="w"> </span><span class="mi">13337</span><span class="p">,</span><span class="w">
  </span><span class="nl">"stoploss_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"stoploss"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="p">,</span><span class="w">
  </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"s"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">8888</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">-13640</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_filled_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">424242</span><span class="p">,</span><span class="w">
  </span><span class="nl">"liquidation"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"leverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="nl">"creation_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="create-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Position sucessfully created.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="create-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>UUID of the position</td>
</tr>
<tr>
<td>» id</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position ID to be deprecated</td>
</tr>
<tr>
<td>» type</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position type [l,m]</td>
</tr>
<tr>
<td>» side</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Side of the position [s,b]</td>
</tr>
<tr>
<td>» price</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Entry price of the position</td>
</tr>
<tr>
<td>» quantity</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Quantity of the position</td>
</tr>
<tr>
<td>» margin</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Margin used for the position creation</td>
</tr>
<tr>
<td>» leverage</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Leverage of the position</td>
</tr>
<tr>
<td>» liquidation</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Liquidation level when the position will be closed</td>
</tr>
<tr>
<td>» market_filled_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>When the order was filled</td>
</tr>
<tr>
<td>» market_wi</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Market working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» pl</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>PL of the position</td>
</tr>
<tr>
<td>» margin_wi</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Margin working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» stoploss</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>stoploss level</td>
</tr>
<tr>
<td>» stoploss_wi</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Stoploss working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» takeprofit</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Takeprofit level</td>
</tr>
<tr>
<td>» takeprofit_wi</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Takeprofit working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» creation_ts</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>When the position was created</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth, cookieAuth, apiKeyAuth ( Scopes: positions_create )
</aside>
<h2 id='update'>Update</h2>
<p><a id="opIdV1_Futures_updatePosition"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"pid"</span><span class="p">:</span> <span class="s">"b87eef8a-52ab-2fea-1adc-c41fba870b0f"</span><span class="p">,</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"takeprofit"</span><span class="p">,</span>
    <span class="s">"value"</span><span class="p">:</span> <span class="mf">13290.5</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"PUT"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">PUT</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/futures</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Bearer {access-token}</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="na">pid</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b87eef8a-52ab-2fea-1adc-c41fba870b0f</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">takeprofit</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">value</span><span class="p">:</span> <span class="mf">13290.5</span>
<span class="p">}));</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> PUT <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/futures <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"pid":"b87eef8a-52ab-2fea-1adc-c41fba870b0f","type":"takeprofit","value":13290.5}'</span>
</code></pre></div>
<p><code>PUT /futures</code></p>

<p>Allows user to modify <code>stoploss</code> or <code>takeprofit</code> parameters of an existing position.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b87eef8a-52ab-2fea-1adc-c41fba870b0f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"takeprofit"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">13290.5</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="update-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» pid</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» type</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» value</td>
<td>body</td>
<td>number</td>
<td>true</td>
<td>none</td>
</tr>
</tbody></table>
<h4 id='enumerated-values-2'>Enumerated Values</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>» type</td>
<td>takeprofit</td>
</tr>
<tr>
<td>» type</td>
<td>stoploss</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b87eef8a-52ab-2fea-1adc-c41fba870b0f"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="update-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Says whether or not the position was updated.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="update-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position id</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth, cookieAuth, apiKeyAuth ( Scopes: positions_modify )
</aside>
<h2 id='close'>Close</h2>
<p><a id="opIdV1_Futures_closePosition"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures"</span>

<span class="n">querystring</span> <span class="o">=</span> <span class="p">{</span><span class="s">"pid"</span><span class="p">:</span><span class="s">"a2ca6172-1078-463d-ae3f-8733f36a9b0e"</span><span class="p">}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"DELETE"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">querystring</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">DELETE</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/futures?pid=a2ca6172-1078-463d-ae3f-8733f36a9b0e</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Bearer {access-token}</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> DELETE <span class="se">\</span>
  <span class="nt">--url</span> <span class="s1">'https://api.lnmarkets.com/v1/futures?pid=a2ca6172-1078-463d-ae3f-8733f36a9b0e'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span>
</code></pre></div>
<p><code>DELETE /futures</code></p>

<p>Close the user position, the PL will be calculated against the current bid or offer
depending on the side of the position</p>

<h3 id="close-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pid</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>ID of the position to close.</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a2ca6172-1078-463d-ae3f-8733f36a9b0e"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"exit_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"closed_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-10-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"closed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="close-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Position is closed</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="close-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» closed</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Is position closed</td>
</tr>
<tr>
<td>» closed_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>Position closed ts</td>
</tr>
<tr>
<td>» exit_price</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>At which price the position was closed</td>
</tr>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position id</td>
</tr>
<tr>
<td>» pl</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>PL of the position</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth, cookieAuth, apiKeyAuth ( Scopes: positions_close )
</aside>
<h2 id='history'>History</h2>
<p><a id="opIdV1_Futures_getPositionList"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures"</span>

<span class="n">querystring</span> <span class="o">=</span> <span class="p">{</span><span class="s">"type"</span><span class="p">:</span><span class="s">"open"</span><span class="p">}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">querystring</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/futures?type=open</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Bearer {access-token}</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> <span class="s1">'https://api.lnmarkets.com/v1/futures?type=open'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span>
</code></pre></div>
<p><code>GET /futures</code></p>

<p>Fetch users positions</p>

<h3 id="history-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>query</td>
<td>string</td>
<td>true</td>
<td>Choose wich kind of positions you need to fetch</td>
</tr>
<tr>
<td>from</td>
<td>query</td>
<td>integer(int64)</td>
<td>false</td>
<td>Starting timestamp (in ms) (only used for closed positions)</td>
</tr>
<tr>
<td>to</td>
<td>query</td>
<td>integer(int64)</td>
<td>false</td>
<td>Ending timestamp (in ms) (only used for closed positions)</td>
</tr>
<tr>
<td>limit</td>
<td>query</td>
<td>integer(int64)</td>
<td>false</td>
<td>Number of rows (only used for closed positions)</td>
</tr>
</tbody></table>
<h4 id='enumerated-values-3'>Enumerated Values</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>open</td>
</tr>
<tr>
<td>type</td>
<td>running</td>
</tr>
<tr>
<td>type</td>
<td>closed</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"positions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"249dc818-f8a5-4713-a3a3-8fe85f2e8969"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">666</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"takeprofit_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canceled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"takeprofit"</span><span class="p">:</span><span class="w"> </span><span class="mi">13337</span><span class="p">,</span><span class="w">
      </span><span class="nl">"stoploss_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canceled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"stoploss"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sign"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"s"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">8888</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">-13640</span><span class="p">,</span><span class="w">
      </span><span class="nl">"market_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"market_filled_ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1630568137340</span><span class="p">,</span><span class="w">
      </span><span class="nl">"margin_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"closed"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">424242</span><span class="p">,</span><span class="w">
      </span><span class="nl">"liquidation"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"leverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
      </span><span class="nl">"exit_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1630568137340</span><span class="p">,</span><span class="w">
      </span><span class="nl">"closed_ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1630568137340</span><span class="p">,</span><span class="w">
      </span><span class="nl">"closed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"canceled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sum_carry_fees"</span><span class="p">:</span><span class="w"> </span><span class="mi">4242</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="history-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Positions history sucessfully fetched.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="history-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» pid</td>
<td>string(uuid)</td>
<td>false</td>
<td>none</td>
<td>id of the position</td>
</tr>
<tr>
<td>» type</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position type [l,m]</td>
</tr>
<tr>
<td>» side</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Side of the position [s,b]</td>
</tr>
<tr>
<td>» pl</td>
<td>number</td>
<td>false</td>
<td>none</td>
<td>PL of the position</td>
</tr>
<tr>
<td>» price</td>
<td>number</td>
<td>false</td>
<td>none</td>
<td>Entry price of the position</td>
</tr>
<tr>
<td>» quantity</td>
<td>number</td>
<td>false</td>
<td>none</td>
<td>Quantity of the position</td>
</tr>
<tr>
<td>» leverage</td>
<td>number</td>
<td>false</td>
<td>none</td>
<td>Leverage of the position</td>
</tr>
<tr>
<td>» liquidation</td>
<td>number</td>
<td>false</td>
<td>none</td>
<td>Liquidation level when the position will be closed</td>
</tr>
<tr>
<td>» margin</td>
<td>number</td>
<td>false</td>
<td>none</td>
<td>Margin used for the position creation</td>
</tr>
<tr>
<td>» margin_wi</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Margin working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» market_filled_ts</td>
<td>number¦null</td>
<td>false</td>
<td>none</td>
<td>When the order was filled</td>
</tr>
<tr>
<td>» market_wi</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Market working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» canceled</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Is the position canceled</td>
</tr>
<tr>
<td>» closed</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Is the position closed</td>
</tr>
<tr>
<td>» closed_ts</td>
<td>number¦null</td>
<td>false</td>
<td>none</td>
<td>When the position was closed</td>
</tr>
<tr>
<td>» creation_ts</td>
<td>number(date-time)</td>
<td>false</td>
<td>none</td>
<td>When the position was created</td>
</tr>
<tr>
<td>» exit_price</td>
<td>number¦null</td>
<td>false</td>
<td>none</td>
<td>At which price the position was closed</td>
</tr>
<tr>
<td>» stoploss</td>
<td>number¦null</td>
<td>false</td>
<td>none</td>
<td>stoploss level</td>
</tr>
<tr>
<td>» stoploss_wi</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Stoploss working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» takeprofit</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Takeprofit level</td>
</tr>
<tr>
<td>» takeprofit_wi</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Takeprofit working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» sum_carry_fees</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>Sum of the positions carry fees</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth, cookieAuth, apiKeyAuth ( Scopes: positions_get_open positions_get_closed )
</aside>
<h2 id='futures-index-history'>Futures index history</h2>
<p><a id="opIdV1_Futures_History_Index"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures/history/index"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/futures/history/index</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/futures/history/index <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span>
</code></pre></div>
<p><code>GET /futures/history/index</code></p>

<p>Retrieves index history at most 1000 entries between two given timestamps.</p>

<h3 id="futures-index-history-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>from</td>
<td>query</td>
<td>integer(int64)</td>
<td>false</td>
<td>Starting timestamp (in ms).</td>
</tr>
<tr>
<td>to</td>
<td>query</td>
<td>integer(int64)</td>
<td>false</td>
<td>Ending timestamp (in ms).</td>
</tr>
<tr>
<td>limit</td>
<td>query</td>
<td>integer(int64)</td>
<td>false</td>
<td>Number of rows</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1605633250615990</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">15853</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="futures-index-history-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Futures index history</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="futures-index-history-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» time</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Timestamp at which the data was recorded (in µs)</td>
</tr>
<tr>
<td>» index</td>
<td>number</td>
<td>false</td>
<td>none</td>
<td>Index value at that time</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='futures-bid-and-offer-history'>Futures bid and offer history</h2>
<p><a id="opIdV1_Futures_History_Bid_Offer"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures/history/bid-offer"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/futures/history/bid-offer</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/futures/history/bid-offer <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span>
</code></pre></div>
<p><code>GET /futures/history/bid-offer</code></p>

<p>Retrieves bid and offer at most 1000 entries between two given timestamps.</p>

<h3 id="futures-bid-and-offer-history-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>from</td>
<td>query</td>
<td>integer(int64)</td>
<td>false</td>
<td>Starting timestamp (in ms).</td>
</tr>
<tr>
<td>to</td>
<td>query</td>
<td>integer(int64)</td>
<td>false</td>
<td>Ending timestamp (in ms).</td>
</tr>
<tr>
<td>limit</td>
<td>query</td>
<td>integer(int64)</td>
<td>false</td>
<td>Number of rows</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1605633250615990</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bid"</span><span class="p">:</span><span class="w"> </span><span class="mi">15853</span><span class="p">,</span><span class="w">
      </span><span class="nl">"offer"</span><span class="p">:</span><span class="w"> </span><span class="mi">15885</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="futures-bid-and-offer-history-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Futures bid offer history</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="futures-bid-and-offer-history-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» time</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Timestamp at which the data was recorded (in µs)</td>
</tr>
<tr>
<td>» bid</td>
<td>number</td>
<td>false</td>
<td>none</td>
<td>Bid value at that time</td>
</tr>
<tr>
<td>» offer</td>
<td>number</td>
<td>false</td>
<td>none</td>
<td>Offer value at that time</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='futures-fixing-history'>Futures fixing history</h2>
<p><a id="opIdV1_Futures_History_Fixing"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures/history/fixing"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/futures/history/fixing</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/futures/history/fixing <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span>
</code></pre></div>
<p><code>GET /futures/history/fixing</code></p>

<p>Retrieves at most 1000 entries between two given timestamps</p>

<h3 id="futures-fixing-history-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>from</td>
<td>query</td>
<td>integer(int64)</td>
<td>false</td>
<td>Starting timestamp (in ms).</td>
</tr>
<tr>
<td>to</td>
<td>query</td>
<td>integer(int64)</td>
<td>false</td>
<td>Ending timestamp (in ms).</td>
</tr>
<tr>
<td>limit</td>
<td>query</td>
<td>integer(int64)</td>
<td>false</td>
<td>Number of rows</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1605633250615990</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"46b6cd74-d91d-4f25-8a55-1cde32a9341c"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fixing_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">15885</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fee_bp_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="futures-fixing-history-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Fixing history</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="futures-fixing-history-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» ts</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Timestamp in ms whent the fixing occured</td>
</tr>
<tr>
<td>» id</td>
<td>number</td>
<td>false</td>
<td>none</td>
<td>Fixing uuid</td>
</tr>
<tr>
<td>» fixing_price</td>
<td>number</td>
<td>false</td>
<td>none</td>
<td>Fixing price</td>
</tr>
<tr>
<td>» fee_bp_value</td>
<td>number</td>
<td>false</td>
<td>none</td>
<td>BP value of fees</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='cancel'>Cancel</h2>
<p><a id="opIdV1_Futures_cancelPosition"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures/cancel"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s">"pid"</span><span class="p">:</span> <span class="s">"b87eef8a-52ab-2fea-1adc-c41fba870b0f"</span><span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/futures/cancel</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Bearer {access-token}</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="na">pid</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b87eef8a-52ab-2fea-1adc-c41fba870b0f</span><span class="dl">'</span><span class="p">}));</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/futures/cancel <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"pid":"b87eef8a-52ab-2fea-1adc-c41fba870b0f"}'</span>
</code></pre></div>
<p><code>POST /futures/cancel</code></p>

<p>Cancel the position linked to the given <code>pid</code>.<strong>Only works on positions that are not currently filled</strong>.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b87eef8a-52ab-2fea-1adc-c41fba870b0f"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="cancel-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Payload containing the position id that will be cancelled.</td>
</tr>
<tr>
<td>» pid</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Position ID</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b87eef8a-52ab-2fea-1adc-c41fba870b0f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"canceled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"closed_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-11-15T10:50:40.332Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="cancel-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Position is canceled</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="cancel-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» canceled</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Canncel success</td>
</tr>
<tr>
<td>» closed_ts</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>When the position was canceled</td>
</tr>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position ID</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth, cookieAuth, apiKeyAuth ( Scopes: positions_close )
</aside>
<h2 id='cash-in'>Cash-in</h2>
<p><a id="opIdV1_Futures_cashin"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures/cash-in"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"amount"</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="s">"pid"</span><span class="p">:</span> <span class="s">"99c470e1-2e03-4486-a37f-1255e08178b1"</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/futures/cash-in</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Bearer {access-token}</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="na">amount</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="na">pid</span><span class="p">:</span> <span class="dl">'</span><span class="s1">99c470e1-2e03-4486-a37f-1255e08178b1</span><span class="dl">'</span><span class="p">}));</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/futures/cash-in <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"amount":1000,"pid":"99c470e1-2e03-4486-a37f-1255e08178b1"}'</span>
</code></pre></div>
<p><code>POST /futures/cash-in</code></p>

<p>Retrieves part of one running position&#39;s PL.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"99c470e1-2e03-4486-a37f-1255e08178b1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="cash-in-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Payload with data relative to the process.</td>
</tr>
<tr>
<td>» amount</td>
<td>body</td>
<td>integer(int64)</td>
<td>true</td>
<td>Amount of PL to cash-in (in sats)</td>
</tr>
<tr>
<td>» pid</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Position ID from which to retrieve PL</td>
</tr>
</tbody></table>
<h4 id='detailed-descriptions-2'>Detailed descriptions</h4>
<p><strong>body</strong>: Payload with data relative to the process.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"249dc818-f8a5-4713-a3a3-8fe85f2e8969"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">666</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"takeprofit_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"takeprofit"</span><span class="p">:</span><span class="w"> </span><span class="mi">13337</span><span class="p">,</span><span class="w">
  </span><span class="nl">"stoploss_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"stoploss"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="p">,</span><span class="w">
  </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"s"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">8888</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">-13640</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_filled_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">424242</span><span class="p">,</span><span class="w">
  </span><span class="nl">"liquidation"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"leverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="nl">"creation_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="cash-in-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Cash-in successfully retrieved and new position informations are sent back.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="cash-in-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>UUID of the position</td>
</tr>
<tr>
<td>» id</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position ID to be deprecated</td>
</tr>
<tr>
<td>» type</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position type [l,m]</td>
</tr>
<tr>
<td>» side</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Side of the position [s,b]</td>
</tr>
<tr>
<td>» price</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Entry price of the position</td>
</tr>
<tr>
<td>» quantity</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Quantity of the position</td>
</tr>
<tr>
<td>» margin</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Margin used for the position creation</td>
</tr>
<tr>
<td>» leverage</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Leverage of the position</td>
</tr>
<tr>
<td>» liquidation</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Liquidation level when the position will be closed</td>
</tr>
<tr>
<td>» market_filled_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>When the order was filled</td>
</tr>
<tr>
<td>» market_wi</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Market working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» pl</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>PL of the position</td>
</tr>
<tr>
<td>» margin_wi</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Margin working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» stoploss</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>stoploss level</td>
</tr>
<tr>
<td>» stoploss_wi</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Stoploss working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» takeprofit</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Takeprofit level</td>
</tr>
<tr>
<td>» takeprofit_wi</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Takeprofit working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» creation_ts</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>When the position was created</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth, cookieAuth, apiKeyAuth ( Scopes: positions_modify )
</aside>
<h2 id='add-margin'>Add margin</h2>
<p><a id="opIdV1_Futures_addmargin"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures/add-margin"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"amount"</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="s">"pid"</span><span class="p">:</span> <span class="s">"99c470e1-2e03-4486-a37f-1255e08178b1"</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/futures/add-margin</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Bearer {access-token}</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="na">amount</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="na">pid</span><span class="p">:</span> <span class="dl">'</span><span class="s1">99c470e1-2e03-4486-a37f-1255e08178b1</span><span class="dl">'</span><span class="p">}));</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/futures/add-margin <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"amount":1000,"pid":"99c470e1-2e03-4486-a37f-1255e08178b1"}'</span>
</code></pre></div>
<p><code>POST /futures/add-margin</code></p>

<p>Add margin to a running position.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"99c470e1-2e03-4486-a37f-1255e08178b1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="add-margin-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Payload with data relative to the process.</td>
</tr>
<tr>
<td>» amount</td>
<td>body</td>
<td>integer(int64)</td>
<td>true</td>
<td>Amount of margin to add (in sats)</td>
</tr>
<tr>
<td>» pid</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Position ID from which to retrieve PL</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"249dc818-f8a5-4713-a3a3-8fe85f2e8969"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">666</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"m"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"takeprofit_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"takeprofit"</span><span class="p">:</span><span class="w"> </span><span class="mi">13337</span><span class="p">,</span><span class="w">
  </span><span class="nl">"stoploss_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"stoploss"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="p">,</span><span class="w">
  </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"s"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">8888</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">-13640</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_filled_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin_wi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">424242</span><span class="p">,</span><span class="w">
  </span><span class="nl">"liquidation"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"leverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="nl">"creation_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="add-margin-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Margin successfully added and new position informations are sent back.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="add-margin-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>UUID of the position</td>
</tr>
<tr>
<td>» id</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position ID to be deprecated</td>
</tr>
<tr>
<td>» type</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position type [l,m]</td>
</tr>
<tr>
<td>» side</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Side of the position [s,b]</td>
</tr>
<tr>
<td>» price</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Entry price of the position</td>
</tr>
<tr>
<td>» quantity</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Quantity of the position</td>
</tr>
<tr>
<td>» margin</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Margin used for the position creation</td>
</tr>
<tr>
<td>» leverage</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Leverage of the position</td>
</tr>
<tr>
<td>» liquidation</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Liquidation level when the position will be closed</td>
</tr>
<tr>
<td>» market_filled_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>When the order was filled</td>
</tr>
<tr>
<td>» market_wi</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Market working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» pl</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>PL of the position</td>
</tr>
<tr>
<td>» margin_wi</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Margin working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» stoploss</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>stoploss level</td>
</tr>
<tr>
<td>» stoploss_wi</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Stoploss working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» takeprofit</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Takeprofit level</td>
</tr>
<tr>
<td>» takeprofit_wi</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>Takeprofit working indicator [filled, running, closed, canceled]</td>
</tr>
<tr>
<td>» creation_ts</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>When the position was created</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth, cookieAuth, apiKeyAuth ( Scopes: positions_modify )
</aside>
<h2 id='close-all'>Close-all</h2>
<p><a id="opIdV1_Futures_closeAllPosition"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures/all/close"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"DELETE"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">DELETE</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/futures/all/close</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Bearer {access-token}</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> DELETE <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/futures/all/close <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span>
</code></pre></div>
<p><code>DELETE /futures/all/close</code></p>

<p>Close every user position. The PL will be calculated against the current bid or offer
depending on the side of the position.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a2ca6172-1078-463d-ae3f-8733f36a9b0e"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"exit_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"closed_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-10-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"closed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="close-all-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Every position has been successfully closed</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="close-all-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» closed</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Is position closed</td>
</tr>
<tr>
<td>» closed_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>Position closed ts</td>
</tr>
<tr>
<td>» exit_price</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>At which price the position was closed</td>
</tr>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position id</td>
</tr>
<tr>
<td>» pl</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>PL of the position</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth, cookieAuth, apiKeyAuth ( Scopes: positions_close )
</aside>
<h2 id='cancel-all'>Cancel-all</h2>
<p><a id="opIdV1_Futures_cancelAllPosition"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures/all/cancel"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"DELETE"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">DELETE</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/futures/all/cancel</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Bearer {access-token}</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> DELETE <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/futures/all/cancel <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span>
</code></pre></div>
<p><code>DELETE /futures/all/cancel</code></p>

<p>Cancel all open positions</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a2ca6172-1078-463d-ae3f-8733f36a9b0e"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"canceled_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-10-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"canceled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="cancel-all-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Array with canceled positions</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="cancel-all-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» canceled</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Is position canceled</td>
</tr>
<tr>
<td>» closed_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>Position canceled ts</td>
</tr>
<tr>
<td>» pid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Position id</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth, cookieAuth, apiKeyAuth ( Scopes: positions_close )
</aside>
<h2 id='futures-carry-fees-history'>Futures carry fees history</h2>
<p><a id="opIdV1_Futures_Carry_Fees"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures/carry-fees"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/futures/carry-fees</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Bearer {access-token}</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/futures/carry-fees <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span>
</code></pre></div>
<p><code>GET /futures/carry-fees</code></p>

<p>Retrieves carry fees for user</p>

<h3 id="futures-carry-fees-history-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>from</td>
<td>query</td>
<td>integer(int64)</td>
<td>false</td>
<td>Starting timestamp (in ms).</td>
</tr>
<tr>
<td>to</td>
<td>query</td>
<td>integer(int64)</td>
<td>false</td>
<td>Ending timestamp (in ms).</td>
</tr>
<tr>
<td>limit</td>
<td>query</td>
<td>integer(int64)</td>
<td>false</td>
<td>Number of rows</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"fixing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fc342986-f59d-43f7-937b-0dcaa74b5f20"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="futures-carry-fees-history-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Carry fees event of the position</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="futures-carry-fees-history-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» ts</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Timestamp in ms whent the fixing occured</td>
</tr>
<tr>
<td>» pid</td>
<td>string(uuid)</td>
<td>false</td>
<td>none</td>
<td>Position id</td>
</tr>
<tr>
<td>» fixing</td>
<td>string(uuid)</td>
<td>false</td>
<td>none</td>
<td>Fixing uuid</td>
</tr>
<tr>
<td>» fees</td>
<td>number</td>
<td>false</td>
<td>none</td>
<td>Fees that were taken from the position</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth, cookieAuth, apiKeyAuth ( Scopes: positions_get_closed )
</aside>

<h1 id="api-user">User</h1>

<p>You can retrieve your user data and modify it</p>
<h2 id='informations'>Informations</h2>
<p><a id="opIdV1_User_getUser"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/user"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/user</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Bearer {access-token}</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/user <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span>
</code></pre></div>
<p><code>GET /user</code></p>

<p>Get the user account Information</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d068f829-26e6-4743-b10d-ebb5a83b3624"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">361086</span><span class="p">,</span><span class="w">
  </span><span class="nl">"account_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joule"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Testnet-node"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"linkingpublickey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"035555cbdd2b5642bbd196b31df477fad20125ae99119fd5ffb1d42c7f4811dd3a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"show_username"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"show_leaderboard"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="informations-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>User information</td>
<td>Inline</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="informations-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» uid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>User&#39;s UUID</td>
</tr>
<tr>
<td>» balance</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>User current balance (avalaible)</td>
</tr>
<tr>
<td>» username</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Username</td>
</tr>
<tr>
<td>» account_type</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>One of [&#39;lnurl&#39;, &#39;credentials&#39;, &#39;joule&#39;]</td>
</tr>
<tr>
<td>» linkingpublickey</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Public key used for lnurl or joule account</td>
</tr>
<tr>
<td>» show_leaderboard</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Show the user PL in the leaderboard</td>
</tr>
<tr>
<td>» show_username</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Show the username on LN Marktes public data, if false show &#39;Anonymous&#39;</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth, cookieAuth, apiKeyAuth ( Scopes: user_get )
</aside>
<h2 id='update-user'>Update user</h2>
<p><a id="opIdV1_User_updateUser"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/user"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"show_username"</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
    <span class="s">"show_leaderboard"</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="s">"username"</span><span class="p">:</span> <span class="s">"Cryptoking"</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"PUT"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">PUT</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/user</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Bearer {access-token}</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="na">show_username</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="na">show_leaderboard</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">username</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Cryptoking</span><span class="dl">'</span><span class="p">}));</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> PUT <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/user <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"show_username":false,"show_leaderboard":true,"username":"Cryptoking"}'</span>
</code></pre></div>
<p><code>PUT /user</code></p>

<p>Modifies account parameters</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"show_username"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"show_leaderboard"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cryptoking"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="update-user-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» show_leaderboard</td>
<td>body</td>
<td>boolean</td>
<td>false</td>
<td>Show the user PL in the leaderboard</td>
</tr>
<tr>
<td>» show_username</td>
<td>body</td>
<td>boolean</td>
<td>false</td>
<td>Show the username on LN Marktes public data, if false show &#39;Anonymous&#39;</td>
</tr>
<tr>
<td>» username</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>Username displayed on LN Markets public data</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d068f829-26e6-4743-b10d-ebb5a83b3624"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">361086</span><span class="p">,</span><span class="w">
  </span><span class="nl">"account_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joule"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Testnet-node"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"linkingpublickey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"035555cbdd2b5642bbd196b31df477fad20125ae99119fd5ffb1d42c7f4811dd3a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"show_username"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"show_leaderboard"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="update-user-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>User information</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="update-user-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» uid</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>User&#39;s UUID</td>
</tr>
<tr>
<td>» balance</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>User current balance (avalaible)</td>
</tr>
<tr>
<td>» username</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Username</td>
</tr>
<tr>
<td>» account_type</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>One of [&#39;lnurl&#39;, &#39;credentials&#39;, &#39;joule&#39;]</td>
</tr>
<tr>
<td>» linkingpublickey</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Public key used for lnurl or joule account</td>
</tr>
<tr>
<td>» show_leaderboard</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Show the user PL in the leaderboard</td>
</tr>
<tr>
<td>» show_username</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Show the username on LN Marktes public data, if false show &#39;Anonymous&#39;</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth, cookieAuth, apiKeyAuth ( Scopes: user_modify )
</aside>
<h2 id='deposit'>Deposit</h2>
<p><a id="opIdV1_User_deposit"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/user/deposit"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"amount"</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="s">"unit"</span><span class="p">:</span> <span class="s">"sat"</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/user/deposit</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Bearer {access-token}</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="na">amount</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="na">unit</span><span class="p">:</span> <span class="dl">'</span><span class="s1">sat</span><span class="dl">'</span><span class="p">}));</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/user/deposit <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"amount":1000,"unit":"sat"}'</span>
</code></pre></div>
<p><code>POST /user/deposit</code></p>

<p>Add fund to your LN Markets balance</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sat"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="deposit-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Payload that contains all informations to initialize a new deposit.</td>
</tr>
<tr>
<td>» amount</td>
<td>body</td>
<td>integer</td>
<td>true</td>
<td>Amount of sat to deposit on the account</td>
</tr>
<tr>
<td>» unit</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>Should be sat by default</td>
</tr>
</tbody></table>
<h4 id='detailed-descriptions-3'>Detailed descriptions</h4>
<p><strong>body</strong>: Payload that contains all informations to initialize a new deposit.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"paymentRequest"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lntb100u1p0jrfz0pp5q0ntrkf052dvep8w6vf0z77rek3fz8xm6c2yau4zhy7f4mzauqgsdzcf3hy6ctjddjhgueqg3jhqmmnd96zqgmxxquryvesvv6z6dehv43z6drpvycj6wfevs6j6dmyxcunxefcxccxxvn9cqzpgxqzpdsp5z40mxcrfqtsxf55u9ju3lvqdw36htsjh4xl2ujrzdff3953fg2yq9qy9qsqv7gfvp0tryme3e8r5xfrpg39j645302fkggps4h5j0aj708lzdgh2dq3pdz6lqazgvkt3wm7qq20vcff46vu5549m3v2d6h0uw3sjacqrkjqcv"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expiry"</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="deposit-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>New deposit entry in database waiting for payment. Using <code>paymentRequest</code> afterwards, user will confirm the deposit and funds will be added to his account.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="deposit-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» paymentRequest</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Invoice you should pay to add balance to your account</td>
</tr>
<tr>
<td>» expiry</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>When the invoice will expiry</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth, cookieAuth, apiKeyAuth ( Scopes: wallet_deposit )
</aside>
<h2 id='deposit-history'>Deposit History</h2>
<p><a id="opIdV1_User_getDepositHistory"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/user/deposit"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/user/deposit</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Bearer {access-token}</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/user/deposit <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span>
</code></pre></div>
<p><code>GET /user/deposit</code></p>

<p>Get deposit history</p>

<h3 id="deposit-history-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>from</td>
<td>query</td>
<td>integer</td>
<td>false</td>
<td>Start of the time interval (UNIX UTC timestamp)</td>
</tr>
<tr>
<td>to</td>
<td>query</td>
<td>integer</td>
<td>false</td>
<td>End of the time interval (UNIX UTC timestamp)</td>
</tr>
<tr>
<td>limit</td>
<td>query</td>
<td>integer</td>
<td>false</td>
<td>number of transactions to fetch</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"transaction"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"269157f3-d4a1-4493-afcb-5e8fdaa49288"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">99400</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"payment_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33f45c13c7ddcae46c6732414552893ca599f9399c62ffc2cfae209e8b17c5c3"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sucess_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="deposit-history-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>History sucessfully pulled.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="deposit-history-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» transaction</td>
<td>[object]</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» id</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Deposit ID in case of deposit</td>
</tr>
<tr>
<td>»» amount</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>Amount in sat</td>
</tr>
<tr>
<td>»» creation_ts</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>When the transaction was initiated</td>
</tr>
<tr>
<td>»» payment_hash</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» success</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» sucess_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth, cookieAuth, apiKeyAuth ( Scopes: wallet_deposit )
</aside>
<h2 id='withdraw-via-invoice'>Withdraw via invoice</h2>
<p><a id="opIdV1_User_Withdraw"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/user/withdraw"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s">"invoice"</span><span class="p">:</span> <span class="s">"lntb100u1p0jr0ykpp5ldx3un8ym6z0uwjxd083mp2rcr04d2dv0fkx729ajs62pq9pfjqqdql23jhxapdwa5hg6rywfshwttjda6hgegcqzpgxq92fjuqsp5m6q0fzynu2qr624mzjc285duurhccmkfg94mcdctc0p9s7qkrq8q9qy9qsqp862cjznpey5r76e7amhlpmhwn2c7xvke59srhv0xf75m4ksjm4hzn8y9xy0zs5ec6gxmsr8gj4q23w8ped32llscjcneyjz2afeapqpu4gamz"</span><span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/user/withdraw</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Bearer {access-token}</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="na">invoice</span><span class="p">:</span> <span class="dl">'</span><span class="s1">lntb100u1p0jr0ykpp5ldx3un8ym6z0uwjxd083mp2rcr04d2dv0fkx729ajs62pq9pfjqqdql23jhxapdwa5hg6rywfshwttjda6hgegcqzpgxq92fjuqsp5m6q0fzynu2qr624mzjc285duurhccmkfg94mcdctc0p9s7qkrq8q9qy9qsqp862cjznpey5r76e7amhlpmhwn2c7xvke59srhv0xf75m4ksjm4hzn8y9xy0zs5ec6gxmsr8gj4q23w8ped32llscjcneyjz2afeapqpu4gamz</span><span class="dl">'</span>
<span class="p">}));</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/user/withdraw <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{"invoice":"lntb100u1p0jr0ykpp5ldx3un8ym6z0uwjxd083mp2rcr04d2dv0fkx729ajs62pq9pfjqqdql23jhxapdwa5hg6rywfshwttjda6hgegcqzpgxq92fjuqsp5m6q0fzynu2qr624mzjc285duurhccmkfg94mcdctc0p9s7qkrq8q9qy9qsqp862cjznpey5r76e7amhlpmhwn2c7xvke59srhv0xf75m4ksjm4hzn8y9xy0zs5ec6gxmsr8gj4q23w8ped32llscjcneyjz2afeapqpu4gamz"}'</span>
</code></pre></div>
<p><code>POST /user/withdraw</code></p>

<p>Withdraw from LN Markets with a Lightning Invoice</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"invoice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lntb100u1p0jr0ykpp5ldx3un8ym6z0uwjxd083mp2rcr04d2dv0fkx729ajs62pq9pfjqqdql23jhxapdwa5hg6rywfshwttjda6hgegcqzpgxq92fjuqsp5m6q0fzynu2qr624mzjc285duurhccmkfg94mcdctc0p9s7qkrq8q9qy9qsqp862cjznpey5r76e7amhlpmhwn2c7xvke59srhv0xf75m4ksjm4hzn8y9xy0zs5ec6gxmsr8gj4q23w8ped32llscjcneyjz2afeapqpu4gamz"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="withdraw-via-invoice-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td>object</td>
<td>true</td>
<td>Payload that countains all informations to initiate a new withdraw.</td>
</tr>
<tr>
<td>» invoice</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>Bolt 11 invoice with the same amount as the request withdraw amount</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentsecret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1b84c9852e929f99700b6cbabc4ca9d1593afc3736938b348c4d3d143e418bd4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3fcbd8b7-c35b-4e83-87bc-111d5bd186b7"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymenthash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fb4d1e4ce4de84fe3a466bcf1d8543c0df56a9ac7a6c6f28bd9434a080a14c80"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="withdraw-via-invoice-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Funds are removed from user account and added to user wallet.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="withdraw-via-invoice-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» amount</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>Amount withdrawnd</td>
</tr>
<tr>
<td>» fees</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>Amount of fees payed</td>
</tr>
<tr>
<td>» paymentsecret</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Payment secret of the settled invoice</td>
</tr>
<tr>
<td>» id</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Withdraw ID</td>
</tr>
<tr>
<td>» paymenthash</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Payment hash for the settled invoice</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth, cookieAuth, apiKeyAuth ( Scopes: wallet_withdraw )
</aside>
<h2 id='withdraw-history'>Withdraw History</h2>
<p><a id="opIdV1_User_getWithdrawHistory"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/user/withdraw"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">,</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer {access-token}"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/user/withdraw</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Bearer {access-token}</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/user/withdraw <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Authorization: Bearer {access-token}'</span>
</code></pre></div>
<p><code>GET /user/withdraw</code></p>

<p>Ge withdraw history</p>

<h3 id="withdraw-history-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>from</td>
<td>query</td>
<td>integer</td>
<td>false</td>
<td>Start of the time interval (UNIX UTC timestamp)</td>
</tr>
<tr>
<td>to</td>
<td>query</td>
<td>integer</td>
<td>false</td>
<td>End of the time interval (UNIX UTC timestamp)</td>
</tr>
<tr>
<td>limit</td>
<td>query</td>
<td>integer</td>
<td>false</td>
<td>number of transactions to fetch</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"transaction"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"269157f3-d4a1-4493-afcb-5e8fdaa49288"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">99400</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"payment_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33f45c13c7ddcae46c6732414552893ca599f9399c62ffc2cfae209e8b17c5c3"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sucess_ts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020-09-15T10:50:40.332Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="withdraw-history-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>History sucessfully pulled.</td>
<td>Inline</td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>The request query and / or body does not fit the schema requirements. It can also be raised by parameters leading to unexpected behaviour / results.</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td>None</td>
</tr>
</tbody></table>

<h3 id="withdraw-history-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» transaction</td>
<td>[object]</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» id</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Withdraw ID in case of withdraw</td>
</tr>
<tr>
<td>»» amount</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>Amount in sat</td>
</tr>
<tr>
<td>»» creation_ts</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>When the transaction was initiated</td>
</tr>
<tr>
<td>»» fee</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>Withdraw fee</td>
</tr>
<tr>
<td>»» error</td>
<td>string¦null</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» payment_hash</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» success</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» sucess_ts</td>
<td>string(date-time)¦null</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
jwtAuth, cookieAuth, apiKeyAuth ( Scopes: wallet_withdraw )
</aside>

<h1 id="api-state">State</h1>

<p>LN Markets state with data about our node and api availability</p>
<h2 id='leaderboard'>Leaderboard</h2>
<p><a id="opIdV1_Leaderboard_getLeaderboard"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/futures/leaderboard"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/futures/leaderboard</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/futures/leaderboard <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span>
</code></pre></div>
<p><code>GET /futures/leaderboard</code></p>

<p>Queries the database to get the 10 users with the biggest posititve PL</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">4242424242</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jean-Kevin"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">3491941</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Roger"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">24013441</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Laura"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">23126094</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Marcus"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">1414019</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Charles"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">242918</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Antoine"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">99999</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXxRoBeRtLeBgDu24xXX"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">61491</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CRYPTOKING"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HEY"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<h3 id="leaderboard-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Leaderboard successfully fetched</td>
<td>Inline</td>
</tr>
</tbody></table>

<h3 id="leaderboard-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» username</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Username or &#39;Anonymous&#39; if the Leaderboard view is disabled</td>
</tr>
<tr>
<td>» pl</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>Sum of every profits and losses of the user</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='api'>API</h2>
<p><a id="opIdV1_State_apiState"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/state"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/state</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/state <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span>
</code></pre></div>
<p><code>GET /state</code></p>

<p>Shows informations about api.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1600244845097</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="s2">"74958cef7d4416dfa7f2c13fd23cd4aa7b469047"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"soec"</span><span class="p">:</span><span class="w"> </span><span class="s2">"31a4964e0ab4c77e7235ce5a0b458ba32dd8ace8"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"withdraw"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"newPosition"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountCreation"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="api-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>The API is online.</td>
<td>Inline</td>
</tr>
</tbody></table>

<h3 id="api-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» ts</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Timestamp reported by the API</td>
</tr>
<tr>
<td>» version</td>
<td>object</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>»» api</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>API version hash</td>
</tr>
<tr>
<td>»» spec</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Open API version hash</td>
</tr>
<tr>
<td>» withdraw</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Are withdraw enabled ?</td>
</tr>
<tr>
<td>» newposition</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Are new position enabled ?</td>
</tr>
<tr>
<td>» accountCreation</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>Are account creation enabled ?</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='node'>Node</h2>
<p><a id="opIdV1_State_nodeState"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/state/node"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/state/node</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/state/node <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span>
</code></pre></div>
<p><code>GET /state/node</code></p>

<p>Shows informations about the lightning node.</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.11.0-beta commit=v0.11.0-beta'"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LN Markets"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pubkey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03bae2db4b57738c1ec1ffa1c5e5a4423968cc592b3b39cddf7d495e72919d6431"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"blockHeigth"</span><span class="p">:</span><span class="w"> </span><span class="mi">1835008</span><span class="p">,</span><span class="w">
  </span><span class="nl">"remoteBalance"</span><span class="p">:</span><span class="w"> </span><span class="mi">266903254</span><span class="p">,</span><span class="w">
  </span><span class="nl">"example"</span><span class="p">:</span><span class="w"> </span><span class="s2">"localBalance"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"channels"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="p">,</span><span class="w">
  </span><span class="nl">"peers"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
  </span><span class="nl">"onionUri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03bae2db4b57738c1ec1ffa1c5e5a4423968cc592b3b39cddf7d495e72919d6431@3pv4ci27cnahbztwlqtbez36rblecanoyxthrtjvxpk3en2y7dxfr3id.onion:9735"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03bae2db4b57738c1ec1ffa1c5e5a4423968cc592b3b39cddf7d495e72919d6431@34.192.102.161:9735"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<h3 id="node-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>The Node is online.</td>
<td>Inline</td>
</tr>
</tbody></table>

<h3 id="node-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» version</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>LND version</td>
</tr>
<tr>
<td>» alias</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Node Alias</td>
</tr>
<tr>
<td>» pubkey</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Node pubkey</td>
</tr>
<tr>
<td>» uri</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Node URI</td>
</tr>
<tr>
<td>» onionUri</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Node URI on tor</td>
</tr>
<tr>
<td>» peers</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Number of peers</td>
</tr>
<tr>
<td>» channels</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Number of channels</td>
</tr>
<tr>
<td>» localBalance</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Node local balance</td>
</tr>
<tr>
<td>» remoteBalance</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Node remote balance</td>
</tr>
<tr>
<td>» blockHeigth</td>
<td>integer(int64)</td>
<td>false</td>
<td>none</td>
<td>Node block heigth</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='announcements'>Announcements</h2>
<p><a id="opIdV1_Announcements_getAnnouncements"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://api.lnmarkets.com/v1/state/announcements"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Accept"</span><span class="p">:</span> <span class="s">"application/json"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.lnmarkets.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/v1/state/announcements</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">Accept</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> https://api.lnmarkets.com/v1/state/announcements <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Accept: application/json'</span>
</code></pre></div>
<p><code>GET /state/announcements</code></p>

<p>Get the list of LN Markets announcements</p>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Good news everyone !"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bitcoin is the world money now !"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creation_ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1607076175239</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bad news everyone !"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We have too much sats"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creation_ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1607019462532</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<h3 id="announcements-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Announcements successfully fetched</td>
<td>Inline</td>
</tr>
</tbody></table>

<h3 id="announcements-responseschema">Response Schema</h3>

<p>Status Code <strong>200</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>» title</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>» text</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>» ts</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>

<p>undefined</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">curl</a>
                <a href="#" data-language-name="javascript--node">Node.js</a>
                <a href="#" data-language-name="python">Python</a>
          </div>
      </div>
    </div>
  </body>
</html>
